var pas={$libimports:{}},rtl={version:30001,quiet:!1,debug_load_units:!1,debug_rtti:!1,$res:{},debug:function(){!rtl.quiet&&console&&console.log&&console.log(arguments)},error:function(t){throw rtl.debug("Error: ",t),t},warn:function(t){rtl.debug("Warn: ",t)},checkVersion:function(t){if(rtl.version!=t)throw"expected rtl version "+t+", but found "+rtl.version},hiInt:Math.pow(2,53),hasString:function(t){return rtl.isString(t)&&0<t.length},isArray:function(t){return Array.isArray(t)},isFunction:function(t){return"function"==typeof t},isModule:function(t){return rtl.isObject(t)&&rtl.hasString(t.$name)&&pas[t.$name]===t},isImplementation:function(t){return rtl.isObject(t)&&rtl.isModule(t.$module)&&t.$module.$impl===t},isNumber:function(t){return"number"==typeof t},isObject:function(t){return"object"==typeof t&&null!=t},isString:function(t){return"string"==typeof t},getNumber:function(t){return"number"==typeof t?t:NaN},getChar:function(t){return"string"==typeof t&&1===t.length?t:""},getObject:function(t){return"object"==typeof t||"function"==typeof t?t:null},isTRecord:function(t){return rtl.isObject(t)&&t.hasOwnProperty("$new")&&"function"==typeof t.$new},isPasClass:function(t){return rtl.isObject(t)&&t.hasOwnProperty("$classname")&&rtl.isObject(t.$module)},isPasClassInstance:function(t){return rtl.isObject(t)&&rtl.isPasClass(t.$class)},hexStr:function(t,e){return("000000000000000"+t.toString(16).toUpperCase()).slice(-e)},m_loading:0,m_loading_intf:1,m_intf_loaded:2,m_loading_impl:3,m_initializing:4,m_initialized:5,module:function(t,e,n,i){rtl.debug_load_units&&rtl.debug('rtl.module name="'+t+'" intfuses='+e+" impluses="+i),rtl.hasString(t)||rtl.error('invalid module name "'+t+'"'),rtl.isArray(e)||rtl.error('invalid interface useslist of "'+t+'"'),rtl.isFunction(n)||rtl.error('invalid interface code of "'+t+'"'),null==i||rtl.isArray(i)||rtl.error('invalid implementation useslist of "'+t+'"'),pas[t]&&rtl.error('module "'+t+'" is already registered');var r=Object.create(rtl.tSectionRTTI),t=r.$module=pas[t]={$name:t,$intfuseslist:e,$impluseslist:i,$state:rtl.m_loading,$intfcode:n,$implcode:null,$impl:null,$rtti:r};i&&(t.$impl={$module:t,$rtti:r})},exitcode:0,run:function(t){try{rtl.hasString(t)||(t="program"),rtl.debug_load_units&&rtl.debug('rtl.run module="'+t+'"'),rtl.initRTTI();var e,n=pas[t];n||rtl.error('rtl.run module "'+t+'" missing'),rtl.loadintf(n),rtl.loadimpl(n),"program"!=t&&"library"!=t||(rtl.debug_load_units&&rtl.debug("running $main"),e=pas[t].$main(),rtl.isNumber(e)&&(rtl.exitcode=e))}catch(t){if(!rtl.showUncaughtExceptions)throw t;rtl.handleUncaughtException(t)||(rtl.showException(t),rtl.exitcode=216)}return rtl.exitcode},showException:function(t){var e=rtl.hasString(t.$classname)?t.$classname:"";e+=(e?": ":"")+(t.hasOwnProperty("fMessage")?t.fMessage:t),alert("Uncaught Exception : "+e)},handleUncaughtException:function(t){if(!rtl.onUncaughtException)return!1;try{return rtl.onUncaughtException(t),!0}catch(t){return!1}},loadintf:function(t){t.$state>rtl.m_loading_intf||(rtl.debug_load_units&&rtl.debug('loadintf: "'+t.$name+'"'),t.$state===rtl.m_loading_intf&&rtl.error('unit cycle detected "'+t.$name+'"'),t.$state=rtl.m_loading_intf,rtl.loaduseslist(t,t.$intfuseslist,rtl.loadintf),rtl.debug_load_units&&rtl.debug('loadintf: run intf of "'+t.$name+'"'),t.$intfcode(t.$intfuseslist),t.$state=rtl.m_intf_loaded)},loaduseslist:function(t,e,n){if(null!=e)for(var i=e.length,r=0;r<i;r++){var s=e[r];rtl.debug_load_units&&rtl.debug('loaduseslist of "'+t.$name+'" uses="'+s+'"'),null==pas[s]&&rtl.error('module "'+t.$name+'" misses "'+s+'"'),n(pas[s])}},loadimpl:function(t){t.$state>=rtl.m_loading_impl||(t.$state<rtl.m_intf_loaded&&rtl.error('loadimpl: interface not loaded of "'+t.$name+'"'),rtl.debug_load_units&&rtl.debug('loadimpl: load uses of "'+t.$name+'"'),t.$state=rtl.m_loading_impl,rtl.loaduseslist(t,t.$impluseslist,rtl.loadintf),rtl.loaduseslist(t,t.$intfuseslist,rtl.loadimpl),rtl.loaduseslist(t,t.$impluseslist,rtl.loadimpl),rtl.debug_load_units&&rtl.debug('loadimpl: run impl of "'+t.$name+'"'),rtl.isFunction(t.$implcode)&&t.$implcode(t.$impluseslist),rtl.debug_load_units&&rtl.debug('loadimpl: run init of "'+t.$name+'"'),t.$state=rtl.m_initializing,rtl.isFunction(t.$init)&&t.$init(),t.$state=rtl.m_initialized)},createCallback:function(t,e){var n;if("string"==typeof e){if(t.hasOwnProperty("$events")||(t.$events={}),n=t.$events[e])return n;t.$events[e]=n=function(){return t[e].apply(t,arguments)}}else n=function(){return e.apply(t,arguments)};return n.scope=t,n.fn=e,n},createSafeCallback:function(t,e){var n;if("string"==typeof e){if(!t[e])return null;if(t.hasOwnProperty("$events")||(t.$events={}),n=t.$events[e])return n;t.$events[e]=n=function(){try{return t[e].apply(t,arguments)}catch(t){if(!rtl.handleUncaughtException(t))throw t}}}else{if(!e)return null;n=function(){try{return e.apply(t,arguments)}catch(t){if(!rtl.handleUncaughtException(t))throw t}}}return n.scope=t,n.fn=e,n},eqCallback:function(t,e){return t===e||null!=t&&null!=e&&t.fn&&t.scope===e.scope&&t.fn===e.fn},initStruct:function(t,e,n){return e.$module&&e.$module.$impl===e&&(e=e.$module),t.$parent=e,rtl.isModule(e)?(t.$module=e,t.$name=n):(t.$module=e.$module,t.$name=e.$name+"."+n),e},initClass:function(t,e,n,i,r){((e[n]=t).$class=t).$classname=r||n,e=rtl.initStruct(t,e,n),t.$fullname=e.$name+"."+n,rtl.debug_rtti&&rtl.debug("initClass "+t.$fullname);r=t.$module.$rtti.$Class(t.$classname,{class:t});t.$rtti=r,rtl.isObject(t.$ancestor)&&(r.ancestor=t.$ancestor.$rtti),r.ancestor||(r.ancestor=null),i.call(t)},createClass:function(t,e,n,i,r){var s=null;null!=n?(s=Object.create(n)).$ancestor=n:s={$ancestor:null,$create:function(t,e){null==e&&(e=[]);var n=Object.create(this);n.$init();try{("string"==typeof t?n[t]:t).apply(n,e),n.AfterConstruction()}catch(t){throw n.Destroy&&n.Destroy(),n.$final(),t}return n},$destroy:function(t){this.BeforeDestruction(),this[t]&&this[t](),this.$final()}},rtl.initClass(s,t,e,i,r)},createClassExt:function(t,e,n,i,r,s){var a=rtl.isFunction(n),o=null;function l(){}a?((o=Object.create(n.prototype)).$ancestorfunc=n,o.$ancestor=null):n.$func?(a=!0,(o=Object.create(n)).$ancestor=n):(o=Object.create(n)).$ancestor=null,o.$create=function(t,e){null==e&&(e=[]);var n=null;(n=0<i.length?this[i](t,e):a?new this.$func(e):Object.create(o)).$init&&n.$init();try{("string"==typeof t?this[t]:t).apply(n,e),n.AfterConstruction&&n.AfterConstruction()}catch(t){throw n.Destroy&&n.Destroy(),n.$final&&n.$final(),t}return n},o.$destroy=function(t){this.BeforeDestruction&&this.BeforeDestruction(),this[t]&&this[t](),this.$final&&this.$final()},rtl.initClass(o,t,e,r,s),a&&((l.prototype=o).$func=l)},createHelper:function(t,e,n,i,r){var s=null,r=(null!=n?(s=Object.create(n)).$ancestor=n:s={$ancestor:null},((t[e]=s).$class=s).$classname=r||e,t=rtl.initStruct(s,t,e),s.$fullname=t.$name+"."+e,s.$module.$rtti.$Helper(s.$classname,{helper:s}));s.$rtti=r,rtl.isObject(n)&&(r.ancestor=n.$rtti),r.ancestor||(r.ancestor=null),i.call(s)},tObjectDestroy:"Destroy",free:function(t,e){if(null==t[e])return null;t[e].$destroy(rtl.tObjectDestroy),t[e]=null},freeLoc:function(t){return null!=t&&t.$destroy(rtl.tObjectDestroy),null},hideProp:function(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0}),2<arguments.length&&(t[e]=n)},recNewT:function(t,e,n,i){var r={},s=(t&&(t[e]=r),rtl.hideProp);return i&&(rtl.initStruct(r,t,e),s(r.$record=r,"$record"),s(r,"$name"),s(r,"$parent"),s(r,"$module"),s(r,"$initSpec")),n.call(r),r.$new||(r.$new=function(){return Object.create(r)}),r.$clone=function(t){return r.$new().$assign(t)},s(r,"$new"),s(r,"$clone"),s(r,"$eq"),s(r,"$assign"),r},is:function(t,e){return e.isPrototypeOf(t)||t===e},isExt:function(t,e,n){return null!=t&&("object"==typeof e||"function"==typeof e)&&(t===e?1!==n&&(2!==n||rtl.isPasClass(t)):e.isPrototypeOf&&e.isPrototypeOf(t)?1===n?rtl.isPasClassInstance(t):2!==n||rtl.isPasClass(t):"function"==typeof e&&t instanceof e)},Exception:null,EInvalidCast:null,EAbstractError:null,ERangeError:null,EIntOverflow:null,EPropWriteOnly:null,raiseE:function(t){var e,n=rtl[t];if(n=null==n&&(e=(e=pas.SysUtils)||pas.sysutils)?(n=(n=(n=e[t])||e[t.toLowerCase()])||e.Exception)||e.exception:n){if(n.Create)throw n.$create("Create");if(n.create)throw n.$create("create")}if("EInvalidCast"===t)throw"invalid type cast";if("EAbstractError"===t)throw"Abstract method called";if("ERangeError"===t)throw"range error";throw t},as:function(t,e){if(null===t||rtl.is(t,e))return t;rtl.raiseE("EInvalidCast")},asExt:function(t,e,n){if(null===t||rtl.isExt(t,e,n))return t;rtl.raiseE("EInvalidCast")},createInterface:function(t,e,n,i,r,s,a){var o=r?Object.create(r):{};return(t[e]=o).$module=t,o.$name=a||e,o.$fullname=t.$name+"."+o.$name,o.$guid=n,o.$guidr=null,o.$names=i||[],rtl.isFunction(s)&&(rtl.debug_rtti&&rtl.debug("createInterface "+o.$fullname),a=o.$module.$rtti.$Interface(o.$name,{interface:o,module:t}),o.$rtti=a,r&&(a.ancestor=r.$rtti),a.ancestor||(a.ancestor=null),s.call(o)),o},strToGUIDR:function(n,t){var i=0;function e(t){var e=n.substr(i,t);return i+=t,parseInt(e,16)}i+=1,t.D1=e(8),i+=1,t.D2=e(4),i+=1,t.D3=e(4),i+=1,t.D4||(t.D4=[]),t.D4[0]=e(2),t.D4[1]=e(2),i+=1;for(var r=2;r<8;r++)t.D4[r]=e(2);return t},guidrToStr:function(t){if(t.$intf)return t.$intf.$guid;for(var e=rtl.hexStr,n="{"+e(t.D1,8)+"-"+e(t.D2,4)+"-"+e(t.D3,4)+"-"+e(t.D4[0],2)+e(t.D4[1],2)+"-",i=2;i<8;i++)n+=e(t.D4[i],2);return n+="}"},createTGUID:function(t){var e=pas.System?pas.System.TGuid:pas.system.tguid;return rtl.strToGUIDR(t,e.$new())},getIntfGUIDR:function(t){var e;return t?(t.$guidr||(e=rtl.createTGUID(t.$guid),t.hasOwnProperty("$guid")||(t=Object.getPrototypeOf(t)),(e.$intf=t).$guidr=e),t.$guidr):null},addIntf:function(t,e,n){n=n||{};var i=e,r=Object.create(i);t.hasOwnProperty("$intfmaps")||(t.$intfmaps={}),t.$intfmaps[e.$guid]=r;do{var s=i.$names;if(!s)break;for(var a=0;a<s.length;a++){var o=s[a],l=(l=n[o])||o;r[o]=(t=>"function"==typeof t?function(){return t.apply(this.$o,arguments)}:function(){rtl.raiseE("EAbstractError")})(t[l])}}while(null!=(i=Object.getPrototypeOf(i)))},getIntfG:function(t,e,n){var i,r,s;return t&&(i=t.$intfmaps)&&(i=i[e])?"function"==typeof i?i.call(t):(r=null,(r=t.$interfaces?t.$interfaces[e]:r)||(((r=Object.create(i)).$o=t).$interfaces||(t.$interfaces={}),t.$interfaces[e]=r),"object"==typeof n?(s=null,0===r.QueryInterface(rtl.getIntfGUIDR(n),{get:function(){return s},set:function(t){s=t}})?s:null):(2===n&&"com"===r.$kind&&r._AddRef(),r)):null},getIntfT:function(t,e){return rtl.getIntfG(t,e.$guid)},queryIntfT:function(t,e){return rtl.getIntfG(t,e.$guid,e)},queryIntfIsT:function(t,e){t=rtl.getIntfG(t,e.$guid);return!!t&&("com"===t.$kind&&t._Release(),!0)},asIntfT:function(t,e){t=rtl.getIntfG(t,e.$guid);if(null!==t)return t;rtl.raiseEInvalidCast()},intfIsIntfT:function(t,e){return null!==t&&rtl.queryIntfIsT(t.$o,e)},intfAsIntfT:function(t,e){return t?rtl.getIntfG(t.$o,e.$guid)||void rtl.raiseEInvalidCast():null},intfIsClass:function(t,e){return null!=t&&rtl.is(t.$o,e)},intfAsClass:function(t,e){return null==t?null:rtl.as(t.$o,e)},intfToClass:function(t,e){return null!==t&&rtl.is(t.$o,e)?t.$o:null},intfRefs:{ref:function(t,e){var n=this[t];return n&&(delete this[t],n._Release()),e&&(this[t]=e),e},free:function(){for(var t in this)this.hasOwnProperty(t)&&(t=this[t])&&t._Release()}},createIntfRefs:function(){return Object.create(rtl.intfRefs)},setIntfP:function(t,e,n,i){var r=t[e];r!==n&&(null!==r&&(t[e]=null,r._Release()),null!==n)&&(i||n._AddRef(),t[e]=n)},setIntfL:function(t,e,n){return t!==e?(null===e||n||e._AddRef(),null!==t&&t._Release()):n&&null!==t&&t._Release(),e},_AddRef:function(t){return t&&t._AddRef(),t},_Release:function(t){return t&&t._Release(),t},_ReleaseArray:function(t,e){if(t)for(var n=0;n<t.length;n++)e<=1?t[n]&&t[n]._Release():rtl._ReleaseArray(t[n],e-1);return null},trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)},checkMethodCall:function(t,e){rtl.isObject(t)&&rtl.is(t,e)||rtl.raiseE("EInvalidCast")},oc:function(t){if(Math.floor(t)===t&&-9007199254740991<=t&&t<=9007199254740991)return t;rtl.raiseE("EIntOverflow")},rc:function(t,e,n){if(Math.floor(t)===t&&e<=t&&t<=n)return t;rtl.raiseE("ERangeError")},rcc:function(t,e,n){if("string"==typeof t&&1===t.length){var i=t.charCodeAt(0);if(e<=i&&i<=n)return t}rtl.raiseE("ERangeError")},rcSetCharAt:function(t,e,n){return("string"!=typeof t||e<0||e>=t.length)&&rtl.raiseE("ERangeError"),rtl.setCharAt(t,e,n)},rcCharAt:function(t,e){return("string"!=typeof t||e<0||e>=t.length)&&rtl.raiseE("ERangeError"),t.charAt(e)},rcArrR:function(t,e){if(Array.isArray(t)&&"number"==typeof e&&0<=e&&e<t.length){if(2<arguments.length){t=t[e];for(var n=2;n<arguments.length;n++)t=rtl.rcArrR(t,arguments[n]);return t}return t[e]}rtl.raiseE("ERangeError")},rcArrW:function(t,e,n){for(var i=3;i<arguments.length;i++)t=rtl.rcArrR(t,e),e=arguments[i-1],n=arguments[i];if(Array.isArray(t)&&"number"==typeof e&&0<=e&&e<t.length)return t[e]=n;rtl.raiseE("ERangeError")},length:function(t){return null==t?0:t.length},arrayRef:function(t){return null!=t&&rtl.hideProp(t,"$pas2jsrefcnt",1),t},arraySetLength:function(t,e,n){for(var i=[],r=9999,s=2;s<arguments.length;s++){var a=arguments[s];"s"===a?r=s-2:i.push({dim:a+0,a:null,i:0,src:null})}var o,l=i.length-1,h=0,c=null,u=null,f=t,p=0,m=0;do{if(m=(f=0<h?(c=i[h-1]).src&&c.src.length>c.i?c.src[c.i]:null:f)?0<f.$pas2jsrefcnt||r<=h?(u=[],p=f.length):(p=0,(u=f).length):(u=[],p=0),o=i[h].dim,u.length=o,!(0<h&&(c.a[c.i]=u,c.i++,0===o)&&c.i<c.a.length)){if(0<o){if(h<l){(c=i[h]).a=u,c.i=0,c.src=f,h++;continue}if(o<p&&(p=o),rtl.isArray(e)){for(s=0;s<p;s++)u[s]=f[s];for(s=m;s<o;s++)u[s]=[]}else if(rtl.isObject(e))if(rtl.isTRecord(e)){for(s=0;s<p;s++)u[s]=e.$clone(f[s]);for(s=m;s<o;s++)u[s]=e.$new()}else{for(s=0;s<p;s++)u[s]=rtl.refSet(f[s]);for(s=m;s<o;s++)u[s]={}}else{for(s=0;s<p;s++)u[s]=f[s];for(s=m;s<o;s++)u[s]=e}}for(;0<h&&i[h-1].i>=i[h-1].dim;)h--;if(0===h)return 0==l?u:i[0].a}}while(1)},arrayEq:function(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},arrayClone:function(t,e,n,i,r,s){if("refSet"===t)for(;n<i;n++)r[s++]=rtl.refSet(e[n]);else if("slice"===t)for(;n<i;n++)r[s++]=e[n].slice(0);else if("function"==typeof t)for(;n<i;n++)r[s++]=t(e[n]);else if(rtl.isTRecord(t))for(;n<i;n++)r[s++]=t.$clone(e[n]);else for(;n<i;n++)r[s++]=e[n]},arrayConcat:function(t){for(var e=[],n=0,i=1;i<arguments.length;i++)null!==(r=arguments[i])&&(n+=r.length);e.length=n;for(var r,n=0,i=1;i<arguments.length;i++)null!==(r=arguments[i])&&(rtl.arrayClone(t,r,0,r.length,e,n),n+=r.length);return e},arrayConcatN:function(){for(var t=null,e=0;e<arguments.length;e++){var n=arguments[e];if(null!==n)if(null===t)t=rtl.arrayRef(n);else if(t.$pas2jsrefcnt)t=t.concat(n);else for(e=0;e<n.length;e++)t.push(n[e])}return t},arrayPush:function(t,e){return null===e?e=[]:e.$pas2jsrefcnt&&(e=rtl.arrayCopy(t,e,0,e.length)),rtl.arrayClone(t,arguments,2,arguments.length,e,e.length),e},arrayPushN:function(t){null===t?t=[]:t.$pas2jsrefcnt&&(t=t.concat());for(var e=1;e<arguments.length;e++)t.push(arguments[e]);return t},arrayCopy:function(t,e,n,i){var r;return null===e||(i=(i=(n=n<0?0:n)+(i=void 0===i?e.length:i))>e.length?e.length:i)<=n?[]:0===t?e.slice(n,i):((r=[]).length=i-n,rtl.arrayClone(t,e,n,i,r,0),r)},arrayInsert:function(t,e,n){return e?(e.splice(n,0,t),e):[t]},setCharAt:function(t,e,n){return t.substr(0,e)+n+t.substr(e+1)},getResStr:function(t,e){t=t.$resourcestrings[e];return t.current||t.org},createSet:function(){for(var t={},e=0;e<arguments.length;e++)if(null!=arguments[e])t[arguments[e]]=!0;else for(var n=arguments[e+=1],i=arguments[e+=1],r=n;r<=i;r++)t[r]=!0;return t},cloneSet:function(t){var e,n={};for(e in t)n[e]=!0;return n},refSet:function(t){return rtl.hideProp(t,"$shared",!0),t},includeSet:function(t,e){return(t=t.$shared?rtl.cloneSet(t):t)[e]=!0,t},excludeSet:function(t,e){return delete(t=t.$shared?rtl.cloneSet(t):t)[e],t},diffSet:function(t,e){var n,i={};for(n in t)e[n]||(i[n]=!0);return i},unionSet:function(t,e){var n,i={};for(n in t)i[n]=!0;for(n in e)i[n]=!0;return i},intersectSet:function(t,e){var n,i={};for(n in t)e[n]&&(i[n]=!0);return i},symDiffSet:function(t,e){var n,i={};for(n in t)e[n]||(i[n]=!0);for(n in e)t[n]||(i[n]=!0);return i},eqSet:function(t,e){for(var n in t)if(!e[n])return!1;for(var n in e)if(!t[n])return!1;return!0},neSet:function(t,e){return!rtl.eqSet(t,e)},leSet:function(t,e){for(var n in t)if(!e[n])return!1;return!0},geSet:function(t,e){for(var n in e)if(!t[n])return!1;return!0},strSetLength:function(t,e){var n=t.length;if(e<n)return t.substring(0,e);if(t.repeat)return t+" ".repeat(e-n);for(;n<e;)t+=" ",n++;return t},spaceLeft:function(t,e){var n=t.length;if(!(e<=n)){if(t.repeat)return" ".repeat(e-n)+t;for(;n<e;)t=" "+t,n++}return t},floatToStr:function(t,e,n){var i,r;return 2<arguments.length?rtl.spaceLeft(t.toFixed(n),e):(i="",1<(r=Math.abs(t))&&r<1e10||1e-10<r&&r<1?i="00":(1<r&&r<1e100||r<1e-10)&&(i="0"),arguments.length<2?e=24:e<9&&(e=9),r=(r=(0<t?" ":"")+t.toExponential(n=e-8)).replace(/e(.)/,"E$1"+i),rtl.spaceLeft(r,e))},valEnum:function(t,e,n){for(var i in t=t.toLowerCase(),e)if("string"==typeof i&&i.toLowerCase()===t)return n(0),e[i];return n(1),0},lw:function(t){return t<0?t+4294967296:t},and:function(t,e){var n=2147483648,i=2147483647;return(t/n&e/n)*n+(t&i&e&i)},or:function(t,e){var n=2147483648,i=2147483647;return(t/n|e/n)*n+(t&i|e&i)},xor:function(t,e){var n=2147483648,i=2147483647;return(t/n^e/n)*n+(t&i^e&i)},shr:function(t,e){return t<0&&(t+=rtl.hiInt),t<2147483648?t>>e:e<=0?t:54<e?0:Math.floor(t/Math.pow(2,e))},shl:function(t,e){return t<0&&(t+=rtl.hiInt),e<=0?t:54<e?0:(t=t*Math.pow(2,e))<=rtl.hiInt?t:t%rtl.hiInt},initRTTI:function(){function r(t,e,n){n=n||rtl.tTypeInfo,rtl.debug_rtti&&rtl.debug('initRTTI.newBaseTI "'+t+'" '+e+' ("'+n.name+'")');n=Object.create(n);return n.name=t,n.kind=e,rtl[t]=n}function t(t,e,n,i){t=r(t,1,rtl.tTypeInfoInteger);t.minvalue=e,t.maxvalue=n,t.ordtype=i}function e(t,e){var n=Object.create(rtl.tTypeMember);n.name=t,n.kind=e,rtl[t]=n}rtl.debug_rtti&&rtl.debug("initRTTI"),rtl.tTypeInfo={name:"tTypeInfo",kind:0,$module:null,attr:null},r("tTypeInfoInteger",1),t("shortint",-128,127,0),t("byte",0,255,1),t("smallint",-32768,32767,2),t("word",0,65535,3),t("longint",-2147483648,2147483647,4),t("longword",0,4294967295,5),t("nativeint",-4503599627370496,0xfffffffffffff,6),t("nativeuint",0,0xfffffffffffff,7),r("char",2),r("string",3),r("tTypeInfoEnum",4,rtl.tTypeInfoInteger),r("tTypeInfoSet",5),r("double",6),r("boolean",7),r("tTypeInfoProcVar",8),r("tTypeInfoMethodVar",9,rtl.tTypeInfoProcVar),r("tTypeInfoArray",10),r("tTypeInfoDynArray",11),r("tTypeInfoPointer",15),r("pointer",15,rtl.tTypeInfoPointer).reftype=null,r("jsvalue",16),r("tTypeInfoRefToProcVar",17,rtl.tTypeInfoProcVar),rtl.tTypeMember={attr:null},e("tTypeMemberField",1),e("tTypeMemberMethod",2),e("tTypeMemberProperty",3),rtl.tTypeMembers={};var n=r("tTypeInfoStruct",0);n.$addMember=function(t,e,n){if(rtl.debug_rtti){if(!rtl.hasString(t)||"$"===t.charAt())throw'invalid member "'+t+'", this="'+this.name+'"';if(!rtl.is(e,rtl.tTypeMember))throw'invalid ancestor "'+e+":"+e.name+'", "'+this.name+"."+t+'"';if(null!=n&&"object"!=typeof n)throw'invalid options "'+n+'", "'+this.name+"."+t+'"'}var i=Object.create(e);if(i.name=t,this.members[t]=i,this.names.push(t),rtl.isObject(n))for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);return i},n.addField=function(t,e,n){n=this.$addMember(t,rtl.tTypeMemberField,n);if(rtl.debug_rtti&&!rtl.is(e,rtl.tTypeInfo))throw'invalid type "'+e+'", "'+this.name+"."+t+'"';return n.typeinfo=e,this.fields.push(t),n},n.addFields=function(){for(var t=0;t<arguments.length;){var e=arguments[t++],n=arguments[t++];t<arguments.length&&"object"==typeof arguments[t]?this.addField(e,n,arguments[t++]):this.addField(e,n)}},n.addMethod=function(t,e,n,i,r,s){s=this.$addMember(t,rtl.tTypeMemberMethod,s);return s.methodkind=e,s.procsig=rtl.newTIProcSig(n,i,r),this.methods.push(t),s},n.addProperty=function(t,e,n,i,r,s){s=this.$addMember(t,rtl.tTypeMemberProperty,s);return s.flags=e,s.typeinfo=n,s.getter=i,s.setter=r,s.params=rtl.isArray(s.params)?rtl.newTIParams(s.params):null,this.properties.push(t),rtl.isString(s.stored)||(s.stored=""),s},n.getField=function(t){return this.members[this.fields[t]]},n.getMethod=function(t){return this.members[this.methods[t]]},n.getProperty=function(t){return this.members[this.properties[t]]},r("tTypeInfoRecord",12,rtl.tTypeInfoStruct),r("tTypeInfoClass",13,rtl.tTypeInfoStruct),r("tTypeInfoClassRef",14),r("tTypeInfoInterface",18,rtl.tTypeInfoStruct),r("tTypeInfoHelper",19,rtl.tTypeInfoStruct),r("tTypeInfoExtClass",20,rtl.tTypeInfoClass)},tSectionRTTI:{$module:null,$inherited:function(t,e,n){rtl.debug_rtti&&rtl.debug('tSectionRTTI.newTI "'+(this.$module?this.$module.$name:"(no module)")+'"."'+t+'" ('+e.name+") "+(n?"init":"forward"));var i=this[t];if(i){if(!i.$forward)throw'duplicate type "'+t+'"';if(!e.isPrototypeOf(i))throw'typeinfo ancestor mismatch "'+t+'" ancestor="'+e.name+'" t.name="'+i.name+'"'}else(i=Object.create(e)).name=t,i.$module=this.$module,this[t]=i;if(n)for(var r in delete i.$forward,n)n.hasOwnProperty(r)&&(i[r]=n[r]);else i.$forward=!0;return i},$Scope:function(t,e,n){t=this.$inherited(t,e,n);return t.members={},t.names=[],t.fields=[],t.methods=[],t.properties=[],t},$TI:function(t,e,n){t=this.$inherited(t,rtl.tTypeInfo,n);return t.kind=e,t},$Int:function(t,e){return this.$inherited(t,rtl.tTypeInfoInteger,e)},$Enum:function(t,e){return this.$inherited(t,rtl.tTypeInfoEnum,e)},$Set:function(t,e){return this.$inherited(t,rtl.tTypeInfoSet,e)},$StaticArray:function(t,e){return this.$inherited(t,rtl.tTypeInfoArray,e)},$DynArray:function(t,e){return this.$inherited(t,rtl.tTypeInfoDynArray,e)},$ProcVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoProcVar,e)},$RefToProcVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoRefToProcVar,e)},$MethodVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoMethodVar,e)},$Record:function(t,e){return this.$Scope(t,rtl.tTypeInfoRecord,e)},$Class:function(t,e){return this.$Scope(t,rtl.tTypeInfoClass,e)},$ClassRef:function(t,e){return this.$inherited(t,rtl.tTypeInfoClassRef,e)},$Pointer:function(t,e){return this.$inherited(t,rtl.tTypeInfoPointer,e)},$Interface:function(t,e){return this.$Scope(t,rtl.tTypeInfoInterface,e)},$Helper:function(t,e){return this.$Scope(t,rtl.tTypeInfoHelper,e)},$ExtClass:function(t,e){return this.$Scope(t,rtl.tTypeInfoExtClass,e)}},newTIParam:function(t){return{name:t[0],typeinfo:t[1],flags:rtl.isNumber(t[2])?t[2]:0}},newTIParams:function(t){var e=[];if(rtl.isArray(t))for(var n=0;n<t.length;n++)e.push(rtl.newTIParam(t[n]));return e},newTIProcSig:function(t,e,n){return{params:rtl.newTIParams(t),resulttype:e||null,flags:n||0}},addResource:function(t){rtl.$res[t.name]=t},getResource:function(t){t=rtl.$res[t];return void 0!==t?t:null},getResourceList:function(){return Object.keys(rtl.$res)}};rtl.module("System",[],function(){var o=this,l=o.$impl;rtl.createClass(this,"TObject",null,function(){this.$init=function(){},this.$final=function(){},this.Create=function(){return this},this.Destroy=function(){},this.Free=function(){this.$destroy("Destroy")},this.FieldAddress=function(t){if(""!==t)for(var e=this.$class,n=null,i=t.toLowerCase(),r=null;null!==e;){for(var s=0,a=(n=e.$rtti).fields.length-1;s<=a;s++)if((r=n.getField(s)).name.toLowerCase()===i)return r;e=e.$ancestor||null}return null},this.AfterConstruction=function(){},this.BeforeDestruction=function(){}}),this.vtInteger=0,this.vtExtended=3,this.vtWideChar=9,this.vtCurrency=12,this.vtUnicodeString=18,this.vtNativeInt=19,rtl.recNewT(this,"TVarRec",function(){this.VType=0,this.VJSValue=void 0,this.$eq=function(t){return this.VType===t.VType&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue},this.$assign=function(t){return this.VType=t.VType,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this}}),this.VarRecs=function(){for(var t=[],e=0,n=null,t=[];e<arguments.length;)(n=o.TVarRec.$new()).VType=rtl.trunc(arguments[e]),n.VJSValue=arguments[e+=1],e+=1,t.push(o.TVarRec.$clone(n));return t},this.IsConsole=!1,this.OnParamCount=null,this.OnParamStr=null,this.Trunc=function(t){return Math.trunc||(Math.trunc=function(t){return t=+t,isFinite(t)?t-t%1||(t<0?-0:0===t?t:0):t}),o.Trunc=Math.trunc,Math.trunc(t)},this.Int=function(t){return o.Trunc(t)},this.Copy=function(t,e,n){return e<1&&(e=1),0<n?t.substring(e-1,e+n-1):""},this.Copy$1=function(t,e){return t.substr((e=e<1?1:e)-1)},this.Delete=function(t,e,n){var i;e<1||e>t.get().length||n<=0||(i=t.get(),t.set(o.Copy(i,1,e-1)+o.Copy$1(i,e+n)))},this.Pos=function(t,e){return e.indexOf(t)+1},this.Insert=function(t,e,n){var i;""!==t&&(i=e.get(),n<1?e.set(t+i):n>i.length?e.set(i+t):e.set(o.Copy(i,1,n-1)+t+o.Copy(i,n,i.length)))},this.upcase=function(t){return t.toUpperCase()},this.val=function(t,e,n){e.set(l.valint(t,-9007199254740991,9007199254740991,n))},this.StringOfChar=function(t,e){var n="";if(0<e&&t.repeat)return t.repeat(e);for(var n="",i=1,r=e;i<=r;i++)n+=t;return n},this.Writeln=function(){var t=0,e="",n=arguments.length-1;if(null!=l.WriteCallBack)for(var i=0,r=n;i<=r;i++)t=i,l.WriteCallBack(arguments[t],t===n);else{for(var e=l.WriteBuf,s=0,a=n;s<=a;s++)e=e+""+arguments[t=s];console.log(e),l.WriteBuf=""}},this.Assigned=function(t){return null!=t&&(!rtl.isArray(t)||0<t.length)},o.$implcode=function(){l.WriteBuf="",l.WriteCallBack=null,l.valint=function(t,e,n,i){var r=0,s=0;if(""===t)i.set(1);else{if(s=Number(t),isNaN(s)){var a=o.Copy(t,1,1);if("$"===a)s=Number("0x"+o.Copy$1(t,2));else if("&"===a)s=Number("0o"+o.Copy$1(t,2));else{if("%"!==a)return i.set(1),r;s=Number("0b"+o.Copy$1(t,2))}}isNaN(s)||s!==o.Int(s)?i.set(1):s<e||n<s?i.set(2):(r=o.Trunc(s),i.set(0))}return r}},o.$init=function(){rtl.exitcode=0}},[]),rtl.module("RTLConsts",["System"],function(){this.$resourcestrings={SArgumentMissing:{org:'Missing argument in format "%s"'},SInvalidFormat:{org:'Invalid format specifier : "%s"'},SInvalidArgIndex:{org:'Invalid argument index in format: "%s"'},SListCapacityError:{org:"List capacity (%s) exceeded."},SListCountError:{org:"List count (%s) out of bounds."},SListIndexError:{org:"List index (%s) out of bounds"},SInvalidName:{org:'Invalid component name: "%s"'},SDuplicateName:{org:'Duplicate component name: "%s"'}}}),rtl.module("Types",["System"],function(){}),rtl.module("JS",["System","Types"],function(){var s=this;rtl.createClass(this,"EJS",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FMessage=""},this.Create$1=function(t){return this.FMessage=t,this}}),this.New=function(t){var e,n=null,i=0,r="";if((e=rtl.length(t))%2==1)throw s.EJS.$create("Create$1",["Number of arguments must be even"]);for(i=0;i<e;){if(!rtl.isString(t[i]))throw r=String(i),s.EJS.$create("Create$1",["Argument "+r+" must be a string."]);i+=2}for(i=0,n=new Object;i<e;)n[r=""+t[i]]=t[i+1],i+=2;return n},this.toNumber=function(t){return+t}}),rtl.module("SysUtils",["System","RTLConsts","JS"],function(){var C=this,F=C.$impl,o=(this.FreeAndNil=function(t){var e=null;null!==(e=t.get())&&(t.set(null),e.$destroy("Destroy"))},rtl.recNewT(this,"TFormatSettings",function(){this.CurrencyDecimals=0,this.CurrencyFormat=0,this.CurrencyString="",this.DateSeparator="\0",this.DecimalSeparator="",this.LongDateFormat="",this.LongTimeFormat="",this.NegCurrFormat=0,this.ShortDateFormat="",this.ShortTimeFormat="",this.ThousandSeparator="",this.TimeAMString="",this.TimePMString="",this.TimeSeparator="\0",this.TwoDigitYearCenturyWindow=0,this.InitLocaleHandler=null,this.$new=function(){var t=Object.create(this);return t.DateTimeToStrFormat=rtl.arraySetLength(null,"",2),t.LongDayNames=rtl.arraySetLength(null,"",7),t.LongMonthNames=rtl.arraySetLength(null,"",12),t.ShortDayNames=rtl.arraySetLength(null,"",7),t.ShortMonthNames=rtl.arraySetLength(null,"",12),t},this.$eq=function(t){return this.CurrencyDecimals===t.CurrencyDecimals&&this.CurrencyFormat===t.CurrencyFormat&&this.CurrencyString===t.CurrencyString&&this.DateSeparator===t.DateSeparator&&rtl.arrayEq(this.DateTimeToStrFormat,t.DateTimeToStrFormat)&&this.DecimalSeparator===t.DecimalSeparator&&this.LongDateFormat===t.LongDateFormat&&rtl.arrayEq(this.LongDayNames,t.LongDayNames)&&rtl.arrayEq(this.LongMonthNames,t.LongMonthNames)&&this.LongTimeFormat===t.LongTimeFormat&&this.NegCurrFormat===t.NegCurrFormat&&this.ShortDateFormat===t.ShortDateFormat&&rtl.arrayEq(this.ShortDayNames,t.ShortDayNames)&&rtl.arrayEq(this.ShortMonthNames,t.ShortMonthNames)&&this.ShortTimeFormat===t.ShortTimeFormat&&this.ThousandSeparator===t.ThousandSeparator&&this.TimeAMString===t.TimeAMString&&this.TimePMString===t.TimePMString&&this.TimeSeparator===t.TimeSeparator&&this.TwoDigitYearCenturyWindow===t.TwoDigitYearCenturyWindow},this.$assign=function(t){return this.CurrencyDecimals=t.CurrencyDecimals,this.CurrencyFormat=t.CurrencyFormat,this.CurrencyString=t.CurrencyString,this.DateSeparator=t.DateSeparator,this.DateTimeToStrFormat=t.DateTimeToStrFormat.slice(0),this.DecimalSeparator=t.DecimalSeparator,this.LongDateFormat=t.LongDateFormat,this.LongDayNames=t.LongDayNames.slice(0),this.LongMonthNames=t.LongMonthNames.slice(0),this.LongTimeFormat=t.LongTimeFormat,this.NegCurrFormat=t.NegCurrFormat,this.ShortDateFormat=t.ShortDateFormat,this.ShortDayNames=t.ShortDayNames.slice(0),this.ShortMonthNames=t.ShortMonthNames.slice(0),this.ShortTimeFormat=t.ShortTimeFormat,this.ThousandSeparator=t.ThousandSeparator,this.TimeAMString=t.TimeAMString,this.TimePMString=t.TimePMString,this.TimeSeparator=t.TimeSeparator,this.TwoDigitYearCenturyWindow=t.TwoDigitYearCenturyWindow,this},this.GetJSLocale=function(){return Intl.DateTimeFormat().resolvedOptions().locale},this.Create=function(){var t=C.TFormatSettings.$new();return t.$assign(C.TFormatSettings.Create$1(C.TFormatSettings.GetJSLocale())),t},this.Create$1=function(t){var e=C.TFormatSettings.$new();return e.LongDayNames=F.DefaultLongDayNames.slice(0),e.ShortDayNames=F.DefaultShortDayNames.slice(0),e.ShortMonthNames=F.DefaultShortMonthNames.slice(0),e.LongMonthNames=F.DefaultLongMonthNames.slice(0),e.DateTimeToStrFormat[0]="c",e.DateTimeToStrFormat[1]="f",e.DateSeparator="-",e.TimeSeparator=":",e.ShortDateFormat="yyyy-mm-dd",e.LongDateFormat="ddd, yyyy-mm-dd",e.ShortTimeFormat="hh:nn",e.LongTimeFormat="hh:nn:ss",e.DecimalSeparator=".",e.ThousandSeparator=",",e.TimeAMString="AM",e.TimePMString="PM",e.TwoDigitYearCenturyWindow=50,e.CurrencyFormat=0,e.NegCurrFormat=0,e.CurrencyDecimals=2,e.CurrencyString="$",null!=C.TFormatSettings.InitLocaleHandler&&C.TFormatSettings.InitLocaleHandler(C.UpperCase(t),C.TFormatSettings.$clone(e)),e}},!0),rtl.createClass(this,"Exception",pas.System.TObject,function(){this.LogMessageOnCreate=!1,this.$init=function(){pas.System.TObject.$init.call(this),this.fMessage=""},this.Create$1=function(t){return this.fMessage=t,this.LogMessageOnCreate&&pas.System.Writeln("Created exception ",this.$classname," with message: ",t),this},this.CreateFmt=function(t,e){return this.Create$1(C.Format(t,e)),this}}),rtl.createClass(this,"EExternal",this.Exception,function(){}),rtl.createClass(this,"EConvertError",this.Exception,function(){}),rtl.createClass(this,"EExternalException",this.EExternal,function(){}),this.RightStr=function(t,e){var n=t.length;return e<1?"":n<=e?t:t.substr(n-e)},this.TrimLeft=function(t){return t.replace(/^[\s\uFEFF\xA0\x00-\x1f]+/,"")},this.UpperCase=function(t){return t.toUpperCase()},this.LowerCase=function(t){return t.toLowerCase()},this.CompareText=function(t,e){t=t.toLowerCase(),e=e.toLowerCase();return e<t?1:t<e?-1:0},this.Format=function(t,e){return C.Format$1(t,e,C.FormatSettings)},this.Format$1=function(r,s,t){var a,e="",o=0,l=0,h=0,n=0,i="",c="",u=0,f=0,p=0,m=!1,d=0;function S(t,e){if(h=(n=255===u?h:u)+1,!(n>rtl.length(s)-1||s[n].VType!==t))return!0;e&&F.DoFormatError(3,r),--h}for(e="",a=r.length,l=o=1,h=0;o<=a;){for(;o<=a&&"%"!==r.charAt(o-1);)o+=1;if(l<o&&(e+=pas.System.Copy(r,l,o-l)),o<a){var g=(()=>{var i=0;function t(){var t,e=0,n=0;if(-1===i){for(l=o;o<=a&&r.charAt(o-1)<="9"&&"0"<=r.charAt(o-1);)o+=1;a<o&&F.DoFormatError(1,r),"*"===r.charAt(o-1)?(255===u?n=h:(n=u,u+=1),(l<o||n>rtl.length(s)-1)&&F.DoFormatError(1,r),h=n+1,0===(t=s[n].VType)||19===t?i=s[n].VJSValue:F.DoFormatError(1,r),o+=1):l<o?(pas.System.val(pas.System.Copy(r,l,o-l),{get:function(){return i},set:function(t){i=t}},{get:function(){return e},set:function(t){e=t}}),0<e&&F.DoFormatError(1,r)):i=-1}}return u=255,i=p=f=-1,o+=1,"%"===r.charAt(o-1)?"%":(":"!==r.charAt(o-1)?t():i=0,":"===r.charAt(o-1)&&(-1===i&&F.DoFormatError(2,r),u=i,i=-1,o+=1),"-"===r.charAt(o-1)?(m=!0,o+=1):m=!1,t(),-1!==i&&(f=i,i=-1),"."===r.charAt(o-1)&&(o+=1,t(),p=i=-1===i?0:i),pas.System.upcase(r.charAt(o-1)))})();if("D"===g)(S(0,!1)||S(19,!0))&&(c=C.IntToStr(s[n].VJSValue)),f=Math.abs(f),u=p-c.length,"-"!==c.charAt(0)?c=pas.System.StringOfChar("0",u)+c:pas.System.Insert(pas.System.StringOfChar("0",u+1),{get:function(){return c},set:function(t){c=t}},2);else if("U"===g)S(0,!1)?c=C.IntToStr(s[n].VJSValue>>>0):S(19,!0)&&(c=C.IntToStr(s[n].VJSValue)),f=Math.abs(f),u=p-c.length,c=pas.System.StringOfChar("0",u)+c;else if("E"===g)S(12,!1)?c=C.FloatToStrF$1(s[n].VJSValue/1e4,2,3,p,t):S(3,!0)&&(c=C.FloatToStrF$1(s[n].VJSValue,2,3,p,t));else if("F"===g)S(12,!1)?c=C.FloatToStrF$1(s[n].VJSValue/1e4,0,9999,p,t):S(3,!0)&&(c=C.FloatToStrF$1(s[n].VJSValue,0,9999,p,t));else if("G"===g)S(12,!1)?c=C.FloatToStrF$1(s[n].VJSValue/1e4,1,p,3,t):S(3,!0)&&(c=C.FloatToStrF$1(s[n].VJSValue,1,p,3,t));else if("N"===g)S(12,!1)?c=C.FloatToStrF$1(s[n].VJSValue/1e4,3,9999,p,t):S(3,!0)&&(c=C.FloatToStrF$1(s[n].VJSValue,3,9999,p,t));else if("M"===g)S(12,!1)?c=C.FloatToStrF$1(s[n].VJSValue/1e4,4,9999,p,t):S(3,!0)&&(c=C.FloatToStrF$1(s[n].VJSValue,4,9999,p,t));else if("S"===g)(S(18,!1)||S(9,!0))&&(i=s[n].VJSValue),u=i.length,-1!==p&&p<u&&(u=p),c=pas.System.Copy(i,1,u);else if("P"===g)S(0,!1)?c=C.IntToHex(s[n].VJSValue,8):S(0,!0)&&(c=C.IntToHex(s[n].VJSValue,16));else if("X"===g)if(S(0,!1)?(d=s[n].VJSValue,u=16):S(19,!0)&&(d=s[n].VJSValue,u=31),u<p)c=C.IntToHex(d,u);else{for(u=1;rtl.shl(1,4*u)<=d&&u<16;)u+=1;p<u&&(p=u),c=C.IntToHex(d,p)}else"%"===g&&(c="%");-1!==f&&c.length<f&&(m?c+=pas.System.StringOfChar(" ",f-c.length):c=pas.System.StringOfChar(" ",f-c.length)+c),e+=c}l=o+=1}return e},rtl.createSet(null,65,90,null,97,122,95)),l=rtl.unionSet(o,rtl.createSet(null,48,57));this.IsValidIdent=function(t,e,n){var i,r=!1,s=!1,a=0;if((i=t.length)<1)return!1;for(r=!(s=!0),a=1;a<=i;){if(s){if(!(t.charCodeAt(a-1)in o))return r;s=!1}else if(e&&"."===t.charAt(a-1)){if(n){if(i<=a)return r;s=!0}}else if(!(t.charCodeAt(a-1)in l))return r;a+=1}return r=!0},this.IntToStr=function(t){return""+t},this.IntToHex=function(t,e){var n="",n="";for(n=(t=t<0?4294967295+t+1:t).toString(16),n=C.UpperCase(n);n.length<e;)n="0"+n;return n},this.TFloatFormat={0:"ffFixed",ffFixed:0,1:"ffGeneral",ffGeneral:1,2:"ffExponent",ffExponent:2,3:"ffNumber",ffNumber:3,4:"ffCurrency",ffCurrency:4},this.FloatToStrF$1=function(t,e,n,i,r){var s="",a=r.DecimalSeparator,o=r.ThousandSeparator,l=e;return 1===l?s=F.FormatGeneralFloat(t,n,a):2===l?s=F.FormatExponentFloat(t,n,i,a):0===l?s=F.FormatFixedFloat(t,i,a):3===l?s=F.FormatNumberFloat(t,i,a,o):4===l&&(s=F.FormatNumberCurrency(1e4*t,i,r)),4!==e&&1<s.length&&"-"===s.charAt(0)&&F.RemoveLeadingNegativeSign({get:function(){return s},set:function(t){s=t}},a,o),s},this.OnGetEnvironmentVariable=null,this.OnGetEnvironmentString=null,this.OnGetEnvironmentVariableCount=null,this.TimeSeparator="\0",this.DateSeparator="\0",this.ShortDateFormat="",this.LongDateFormat="",this.ShortTimeFormat="",this.LongTimeFormat="",this.DecimalSeparator="",this.ThousandSeparator="",this.TimeAMString="",this.TimePMString="",this.ShortMonthNames=rtl.arraySetLength(null,"",12),this.LongMonthNames=rtl.arraySetLength(null,"",12),this.ShortDayNames=rtl.arraySetLength(null,"",7),this.LongDayNames=rtl.arraySetLength(null,"",7),this.FormatSettings=this.TFormatSettings.$new(),this.CurrencyFormat=0,this.NegCurrFormat=0,this.CurrencyDecimals=0,this.CurrencyString="",this.TStringSplitOptions={0:"None",None:0,1:"ExcludeEmpty",ExcludeEmpty:1},rtl.createHelper(this,"TStringHelper",null,function(){this.GetLength=function(){return this.get().length},this.IndexOfAny$3=function(t,e){return C.TStringHelper.IndexOfAny$5.call(this,t,e,C.TStringHelper.GetLength.call(this))},this.IndexOfAny$5=function(t,e,n){var i=0,r=0,s=0;for((s=(r=e+1)+n-1)>C.TStringHelper.GetLength.call(this)&&(s=C.TStringHelper.GetLength.call(this)),i=-1;-1===i&&r<=s;)F.HaveChar(this.get().charAt(r-1),t)&&(i=r-1),r+=1;return i},this.IndexOfAnyUnquoted$1=function(t,e,n,i){return C.TStringHelper.IndexOfAnyUnquoted$2.call(this,t,e,n,i,C.TStringHelper.GetLength.call(this))},this.IndexOfAnyUnquoted$2=function(t,e,n,i,r){var s=0,a=0,o=0,l=0,s=-1;if((o=i+r-1)>C.TStringHelper.GetLength.call(this)&&(o=C.TStringHelper.GetLength.call(this)),a=i+1,l=0,e===n)for(;-1===s&&a<=o;)0===(l=this.get().charAt(a-1)===e?1-l:l)&&F.HaveChar(this.get().charAt(a-1),t)&&(s=a-1),a+=1;else for(;-1===s&&a<=o;)this.get().charAt(a-1)===e?l+=1:this.get().charAt(a-1)===n&&0<l&&--l,0===l&&F.HaveChar(this.get().charAt(a-1),t)&&(s=a-1),a+=1;return s},this.Split$1=function(t){return C.TStringHelper.Split$21.call(this,t,"\0","\0",C.TStringHelper.GetLength.call(this)+1,0)};this.Split$21=function(e,n,i,t,r){var s=[],a="";function o(t){return"\0"!==n?C.TStringHelper.IndexOfAnyUnquoted$1.call({get:function(){return a},set:function(t){a=t}},e,n,i,t):C.TStringHelper.IndexOfAny$3.call({get:function(){return a},set:function(t){a=t}},e,t)}function l(t){rtl.length(s)<=t&&(s=rtl.arraySetLength(s,"",rtl.length(s)+10))}for(var h=0,c=0,u=0,f="",a=this.get(),s=rtl.arraySetLength(s,"",10),u=0,c=0,h=o(0);-1!==h&&(0===t||u<t);)""===(f=C.TStringHelper.Substring$1.call(this,c,h-c))&&1===r||(l(u),s[u]=f,u+=1),h=o(c=h+1);return c<=C.TStringHelper.GetLength.call(this)&&(0===t||u<t)&&(""===(f=C.TStringHelper.Substring.call(this,c))&&1===r||(l(u),s[u]=f,u+=1)),s=rtl.arraySetLength(s,"",u)},this.Substring=function(t){return C.TStringHelper.Substring$1.call(this,t,C.TStringHelper.GetLength.call(this)-t)},this.Substring$1=function(t,e){return pas.System.Copy(this.get(),t+1,e)}}),C.$implcode=function(){F.DefaultShortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],F.DefaultLongMonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],F.DefaultShortDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],F.DefaultLongDayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],F.feInvalidFormat=1,F.feMissingArgument=2,F.feInvalidArgIndex=3,F.DoFormatError=function(t,e){if(1===t)throw C.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SInvalidFormat"),pas.System.VarRecs(18,e)]);if(2===t)throw C.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SArgumentMissing"),pas.System.VarRecs(18,e)]);if(3===t)throw C.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SInvalidArgIndex"),pas.System.VarRecs(18,e)])},F.maxdigits=15,F.ReplaceDecimalSep=function(t,e){var n;return 0<(n=pas.System.Pos(".",t))?pas.System.Copy(t,1,n-1)+e+pas.System.Copy(t,n+1,t.length-n):t},F.FormatGeneralFloat=function(t,e,n){var i="",r=0,s=0,a=0,o=0,i=rtl.floatToStr(t,(e=-1===e||15<e?15:e)+7);if(i=C.TrimLeft(i),0!==(r=pas.System.Pos(".",i))){if(0===(s=pas.System.Pos("E",i)))return i=F.ReplaceDecimalSep(i,n);for(a=s+2,o=0;a<=i.length;)o=10*o+i.charCodeAt(a-1)-48,a+=1;if(r+(o="-"===i.charAt(s+1-1)?-o:o)<s&&-6<o){if(i=rtl.strSetLength(i,s-1),0<=o){for(var l=0,h=o-1;l<=h;l++)a=l,i=rtl.setCharAt(i,r-1,i.charAt(r+1-1)),r+=1;for("-"===(i=rtl.setCharAt(i,r-1,".")).charAt((r=1)-1)&&(r+=1);"0"===i.charAt(r-1)&&r<i.length&&pas.System.Copy(i,r+1,n.length)!==n;)pas.System.Delete({get:function(){return i},set:function(t){i=t}},r,1)}else pas.System.Insert(pas.System.Copy("00000",1,-o),{get:function(){return i},set:function(t){i=t}},r-1),i=rtl.setCharAt(i,r-o-1,i.charAt(r-o-1-1)),i=rtl.setCharAt(i,r-1,"."),-1!==o&&(i=rtl.setCharAt(i,r-o-1-1,"0"));for(a=i.length;0<a&&"0"===i.charAt(a-1);)--a;"."===i.charAt(a-1)&&--a,i=0===a||1===a&&"-"===i.charAt(0)?"0":rtl.strSetLength(i,a)}else{for(;"0"===i.charAt(s-1-1);)pas.System.Delete({get:function(){return i},set:function(t){i=t}},s-1,1),--s;for(i.charAt(s-1-1)===n&&(pas.System.Delete({get:function(){return i},set:function(t){i=t}},s-1,1),--s),"+"===i.charAt(s+1-1)?pas.System.Delete({get:function(){return i},set:function(t){i=t}},s+1,1):s+=1;"0"===i.charAt(s+1-1);)pas.System.Delete({get:function(){return i},set:function(t){i=t}},s+1,1)}i=F.ReplaceDecimalSep(i,n)}return i},F.FormatExponentFloat=function(t,e,n,i){var r,s="";for(i=C.FormatSettings.DecimalSeparator,s=rtl.floatToStr(t,(e=-1===e||15<e?15:e)+7);" "===s.charAt(0);)pas.System.Delete({get:function(){return s},set:function(t){s=t}},1,1);if(0!==(r=pas.System.Pos("E",s)))if((n=s.length-(r+=2)-(n=4<n?4:n)+1)<0)pas.System.Insert(pas.System.Copy("0000",1,-n),{get:function(){return s},set:function(t){s=t}},r);else for(;0<n&&"0"===s.charAt(r-1);){if(pas.System.Delete({get:function(){return s},set:function(t){s=t}},r,1),r>s.length){pas.System.Delete({get:function(){return s},set:function(t){s=t}},r-2,2);break}--n}return s=F.ReplaceDecimalSep(s,i)},F.FormatFixedFloat=function(t,e,n){var i="";return-1===e?e=2:18<e&&(e=18),""!==(i=rtl.floatToStr(t,0,e))&&" "===i.charAt(0)&&pas.System.Delete({get:function(){return i},set:function(t){i=t}},1,1),i=F.ReplaceDecimalSep(i,n)},F.FormatNumberFloat=function(t,e,n,i){var r="",s=0;if(-1===e?e=2:15<e&&(e=15),""!==(r=rtl.floatToStr(t,0,e))&&" "===r.charAt(0)&&pas.System.Delete({get:function(){return r},set:function(t){r=t}},1,1),(s=pas.System.Pos(".",r))<=0&&(s=r.length+1),r=F.ReplaceDecimalSep(r,n),s-=3,""!==i&&"\0"!==i)for(;1<s;)"-"!==r.charAt(s-1-1)&&pas.System.Insert(i,{get:function(){return r},set:function(t){r=t}},s),s-=3;return r},F.RemoveLeadingNegativeSign=function(t,e,n){for(var i,r=!1,r=!1,s=n,a=2,o=t.get().length;a<=o&&(i=a,r=t.get().charCodeAt(i-1)in rtl.createSet(48,e.charCodeAt(),69,43)||t.get().charAt(i-1)===s);a++);return r&&"-"===t.get().charAt(0)&&pas.System.Delete(t,1,1),r},F.FormatNumberCurrency=function(t,e,n){var i="",r=0,s=n.DecimalSeparator,a=n.ThousandSeparator,o=n.CurrencyString;if(-1===e?e=n.CurrencyDecimals:18<e&&(e=18),(t="-"===(i=rtl.floatToStr(t/1e4,0,e)).charAt(0))&&pas.System.Delete({get:function(){return i},set:function(t){i=t}},1,1),r=pas.System.Pos(".",i),""!==a)for(0!==r?i=F.ReplaceDecimalSep(i,s):r=i.length+1,r-=3;1<r;)pas.System.Insert(a,{get:function(){return i},set:function(t){i=t}},r),r-=3;return t&&F.RemoveLeadingNegativeSign({get:function(){return i},set:function(t){i=t}},s,a),t?0===(e=n.NegCurrFormat)?i="("+o+i+")":1===e?i="-"+o+i:2===e?i=o+"-"+i:3===e?i=o+i+"-":4===e?i="("+i+o+")":5===e?i="-"+i+o:6===e?i=i+"-"+o:7===e?i=i+o+"-":8===e?i="-"+i+" "+o:9===e?i="-"+o+" "+i:10===e?i=i+" "+o+"-":11===e?i=o+" "+i+"-":12===e?i=o+" -"+i:13===e?i=i+"- "+o:14===e?i="("+o+" "+i+")":15===e&&(i="("+i+" "+o+")"):0===(s=n.CurrencyFormat)?i=o+i:1===s?i+=o:2===s?i=o+" "+i:3===s&&(i=i+" "+o),i},F.InitGlobalFormatSettings=function(){C.FormatSettings.$assign(C.TFormatSettings.Create()),C.TimeSeparator=C.FormatSettings.TimeSeparator,C.DateSeparator=C.FormatSettings.DateSeparator,C.ShortDateFormat=C.FormatSettings.ShortDateFormat,C.LongDateFormat=C.FormatSettings.LongDateFormat,C.ShortTimeFormat=C.FormatSettings.ShortTimeFormat,C.LongTimeFormat=C.FormatSettings.LongTimeFormat,C.DecimalSeparator=C.FormatSettings.DecimalSeparator,C.ThousandSeparator=C.FormatSettings.ThousandSeparator,C.TimeAMString=C.FormatSettings.TimeAMString,C.TimePMString=C.FormatSettings.TimePMString,C.CurrencyFormat=C.FormatSettings.CurrencyFormat,C.NegCurrFormat=C.FormatSettings.NegCurrFormat,C.CurrencyDecimals=C.FormatSettings.CurrencyDecimals,C.CurrencyString=C.FormatSettings.CurrencyString},F.HaveChar=function(t,e){for(var n=!1,i=0,i=0,n=!1;!n&&i<rtl.length(e);)n=e[i]===t,i+=1;return n}},C.$init=function(){F.InitGlobalFormatSettings(),C.ShortMonthNames=F.DefaultShortMonthNames.slice(0),C.LongMonthNames=F.DefaultLongMonthNames.slice(0),C.ShortDayNames=F.DefaultShortDayNames.slice(0),C.LongDayNames=F.DefaultLongDayNames.slice(0)}},[]),rtl.module("Classes",["System","RTLConsts","Types","SysUtils","JS"],function(){var i=this,e=i.$impl;this.$rtti.$MethodVar("TNotifyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject]]),methodkind:0}),rtl.createClass(this,"EListError",pas.SysUtils.Exception,function(){}),rtl.createClass(this,"EStringListError",this.EListError,function(){}),rtl.createClass(this,"EComponentError",pas.SysUtils.Exception,function(){}),rtl.createClass(this,"TFPList",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FList=[],this.FCount=0,this.FCapacity=0},this.$final=function(){this.FList=void 0,pas.System.TObject.$final.call(this)},this.Get=function(t){return(t<0||t>=this.FCount)&&this.RaiseIndexError(t),this.FList[t]},this.SetCapacity=function(t){t<this.FCount&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListCapacityError"),""+t),t!==this.FCapacity&&(this.FList=rtl.arraySetLength(this.FList,void 0,t),this.FCapacity=t)},this.SetCount=function(t){t<0&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListCountError"),""+t),t>this.FCount&&t>this.FCapacity&&this.SetCapacity(t),this.FCount=t},this.RaiseIndexError=function(t){this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),""+t)},this.Destroy=function(){this.Clear(),pas.System.TObject.Destroy.call(this)},this.Add=function(t){return this.FCount===this.FCapacity&&this.Expand(),this.FList[this.FCount]=t,t=this.FCount,this.FCount+=1,t},this.Clear=function(){0<rtl.length(this.FList)&&(this.SetCount(0),this.SetCapacity(0))},this.Delete=function(t){(t<0||t>=this.FCount)&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),""+t),this.FCount=this.FCount-1,this.FList.splice(t,1),--this.FCapacity},this.Error=function(t,e){throw i.EListError.$create("CreateFmt",[t,pas.System.VarRecs(18,e)])},this.Expand=function(){var t=0;return this.FCount<this.FCapacity||(t=4,3<this.FCapacity&&(t+=4),8<this.FCapacity&&(t+=8),127<this.FCapacity&&(t+=this.FCapacity>>>2),this.SetCapacity(this.FCapacity+t),0),this},this.IndexOf=function(t){for(var e=0,e=0,n=this.FCount;e<n&&this.FList[e]!=t;)e+=1;return e=n<=e?-1:e},this.Last=function(){return 0===this.FCount?null:this.Get(this.FCount-1)},this.Remove=function(t){return-1!==(t=this.IndexOf(t))&&this.Delete(t),t}}),rtl.createClass(this,"TPersistent",pas.System.TObject,function(){}),rtl.createClass(this,"TStrings",this.TPersistent,function(){this.$init=function(){i.TPersistent.$init.call(this),this.FAlwaysQuote=!1},this.Error=function(t,e){throw i.EStringListError.$create("CreateFmt",[t,pas.System.VarRecs(18,pas.SysUtils.IntToStr(e))])},this.GetCapacity=function(){return this.GetCount()},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FAlwaysQuote=!1,this},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.$rtti.addMethod("Create$1",2,[])}),rtl.recNewT(this,"TStringItem",function(){this.FString="",this.FObject=null,this.$eq=function(t){return this.FString===t.FString&&this.FObject===t.FObject},this.$assign=function(t){return this.FString=t.FString,this.FObject=t.FObject,this}}),rtl.createClass(this,"TStringList",this.TStrings,function(){this.$init=function(){i.TStrings.$init.call(this),this.FList=[],this.FCount=0,this.FOwnsObjects=!1},this.$final=function(){this.FList=void 0,i.TStrings.$final.call(this)},this.InternalClear=function(t,e){var n=0;if(t<this.FCount){if(this.FOwnsObjects)for(var i=t,r=this.FCount-1;i<=r;i++)n=i,this.FList[n].FString="",pas.SysUtils.FreeAndNil({p:this.FList[n],get:function(){return this.p.FObject},set:function(t){this.p.FObject=t}});else for(var s=t,a=this.FCount-1;s<=a;s++)n=s,this.FList[n].FString="";this.FCount=t}e||this.SetCapacity(0)},this.CheckIndex=function(t){(t<0||t>=this.FCount)&&this.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),t)},this.Get=function(t){return this.CheckIndex(t),this.FList[t].FString},this.GetCapacity=function(){return rtl.length(this.FList)},this.GetCount=function(){return this.FCount},this.SetCapacity=function(t){t<0&&this.Error(rtl.getResStr(pas.RTLConsts,"SListCapacityError"),t),t!==this.GetCapacity()&&(this.FList=rtl.arraySetLength(this.FList,i.TStringItem,t))},this.Destroy=function(){this.InternalClear(0,!1),i.TStrings.Destroy.call(this)}}),this.TOperation={0:"opInsert",opInsert:0,1:"opRemove",opRemove:1},this.TComponentStateItem={0:"csLoading",csLoading:0,1:"csReading",csReading:1,2:"csWriting",csWriting:2,3:"csDestroying",csDestroying:3,4:"csDesigning",csDesigning:4,5:"csAncestor",csAncestor:5,6:"csUpdating",csUpdating:6,7:"csFixups",csFixups:7,8:"csFreeNotification",csFreeNotification:8,9:"csInline",csInline:9,10:"csDesignInstance",csDesignInstance:10},this.TComponentStyleItem={0:"csInheritable",csInheritable:0,1:"csCheckPropAvail",csCheckPropAvail:1,2:"csSubComponent",csSubComponent:2,3:"csTransient",csTransient:3},rtl.createClass(this,"TComponent",this.TPersistent,function(){this.$init=function(){i.TPersistent.$init.call(this),this.FOwner=null,this.FName="",this.FTag=0,this.FComponents=null,this.FFreeNotifies=null,this.FComponentState={},this.FComponentStyle={}},this.$final=function(){this.FOwner=void 0,this.FComponents=void 0,this.FFreeNotifies=void 0,this.FComponentState=void 0,this.FComponentStyle=void 0,i.TPersistent.$final.call(this)},this.Insert=function(t){null==this.FComponents&&(this.FComponents=i.TFPList.$create("Create")),this.FComponents.Add(t),t.FOwner=this},this.Remove=function(t){(t.FOwner=null)!=this.FComponents&&(this.FComponents.Remove(t),0===this.FComponents.FCount)&&(this.FComponents.$destroy("Destroy"),this.FComponents=null)},this.RemoveNotification=function(t){null!==this.FFreeNotifies&&(this.FFreeNotifies.Remove(t),0===this.FFreeNotifies.FCount)&&(this.FFreeNotifies.$destroy("Destroy"),this.FFreeNotifies=null,this.FComponentState=rtl.excludeSet(this.FComponentState,8))},this.SetReference=function(t){var e,n=null;""!==this.FName&&null!=this.FOwner&&(n=this.FOwner,null!=(e=this.FOwner.$class.FieldAddress(this.FName)))&&(n[""+e.name]=t?this:null)},this.ChangeName=function(t){this.FName=t},this.Notification=function(t,e){var n=0;if(1===e&&this.RemoveFreeNotification(t),null!=this.FComponents)for(n=this.FComponents.FCount-1;0<=n;)rtl.getObject(this.FComponents.Get(n)).Notification(t,e),--n>=this.FComponents.FCount&&(n=this.FComponents.FCount-1)},this.SetDesigning=function(t,e){var n;if(this.FComponentState=t?rtl.includeSet(this.FComponentState,4):rtl.excludeSet(this.FComponentState,4),null!=this.FComponents&&e)for(var i=0,r=this.FComponents.FCount-1;i<=r;i++)n=i,rtl.getObject(this.FComponents.Get(n)).SetDesigning(t,!0)},this.SetName=function(t){if(this.FName!==t){if(""!==t&&!pas.SysUtils.IsValidIdent(t,!1,!1))throw i.EComponentError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SInvalidName"),pas.System.VarRecs(18,t)]);null!=this.FOwner?this.FOwner.ValidateRename(this,this.FName,t):this.ValidateRename(null,this.FName,t),this.SetReference(!1),this.ChangeName(t),this.SetReference(!0)}},this.ValidateRename=function(t,e,n){if(null!==t&&0!==pas.SysUtils.CompareText(e,n)&&t.FOwner===this&&null!==this.FindComponent(n))throw i.EComponentError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SDuplicateName"),pas.System.VarRecs(18,n)]);4 in this.FComponentState&&null!==this.FOwner&&this.FOwner.ValidateRename(t,e,n)},this.ValidateContainer=function(t){t.ValidateInsert(this)},this.ValidateInsert=function(t){},this.Create$1=function(t){return this.FComponentStyle=rtl.createSet(0),null!=t&&t.InsertComponent(this),this},this.Destroy=function(){var t=0,e=null;if(this.Destroying(),null!=this.FFreeNotifies){for(t=this.FFreeNotifies.FCount-1;0<=t;)e=rtl.getObject(this.FFreeNotifies.Get(t)),this.FFreeNotifies.Delete(t),e.Notification(this,1),null===this.FFreeNotifies?t=0:t>this.FFreeNotifies.FCount&&(t=this.FFreeNotifies.FCount),--t;pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FFreeNotifies},set:function(t){this.p.FFreeNotifies=t}})}this.DestroyComponents(),null!==this.FOwner&&this.FOwner.RemoveComponent(this),pas.System.TObject.Destroy.call(this)},this.BeforeDestruction=function(){3 in this.FComponentState||this.Destroying()},this.DestroyComponents=function(){for(var t=null;null!=this.FComponents;)t=rtl.getObject(this.FComponents.Last()),this.Remove(t),t.$destroy("Destroy")},this.Destroying=function(){var t;if(!(3 in this.FComponentState)&&(this.FComponentState=rtl.includeSet(this.FComponentState,3),null!=this.FComponents))for(var e=0,n=this.FComponents.FCount-1;e<=n;e++)t=e,rtl.getObject(this.FComponents.Get(t)).Destroying()},this.FindComponent=function(t){var e,n=null,n=null;if(""!==t&&null!=this.FComponents)for(var i=0,r=this.FComponents.FCount-1;i<=r;i++)if(e=i,0===pas.SysUtils.CompareText(rtl.getObject(this.FComponents.Get(e)).FName,t))return n=rtl.getObject(this.FComponents.Get(e));return n},this.RemoveFreeNotification=function(t){this.RemoveNotification(t),t.RemoveNotification(this)},this.InsertComponent=function(t){t.ValidateContainer(this),this.ValidateRename(t,"",t.FName),null!==t.FOwner&&t.FOwner.RemoveComponent(t),this.Insert(t),4 in this.FComponentState&&t.SetDesigning(!0,!0),this.Notification(t,0)},this.RemoveComponent=function(t){this.Notification(t,1),this.Remove(t),t.SetDesigning(!1,!0),this.ValidateRename(t,t.FName,"")};var t=this.$rtti;t.addMethod("Create$1",2,[["AOwner",t]]),t.addProperty("Name",6,rtl.string,"FName","SetName"),t.addProperty("Tag",0,rtl.nativeint,"FTag","FTag",{Default:0})}),this.RegisterFindGlobalComponentProc=function(t){null==e.FindGlobalComponentList&&(e.FindGlobalComponentList=i.TFPList.$create("Create")),e.FindGlobalComponentList.IndexOf(t)<0&&e.FindGlobalComponentList.Add(t)},i.$implcode=function(){e.ClassList=null,e.FindGlobalComponentList=null},i.$init=function(){e.ClassList=new Object}},[]),rtl.module("weborworker",["System","JS","Types"],function(){}),rtl.module("Web",["System","Types","JS","weborworker"],function(){this.$rtti.$ExtClass("TJSHTMLCanvasElement",{ancestor:this.$rtti.TJSHTMLElement,jsclass:"HTMLCanvasElement"})}),rtl.module("CustApp",["System","Classes","SysUtils","Types","JS"],function(){rtl.createClass(this,"TCustomApplication",pas.Classes.TComponent,function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FExceptObjectJS=void 0,this.FTerminated=!1,this.FOptionChar="\0",this.FCaseSensitiveOptions=!1,this.FStopOnException=!1,this.FExceptionExitCode=0,this.FExceptObject=null},this.$final=function(){this.FExceptObject=void 0,pas.Classes.TComponent.$final.call(this)},this.Create$1=function(t){return pas.Classes.TComponent.Create$1.call(this,t),this.FOptionChar="-",this.FCaseSensitiveOptions=!0,this.FStopOnException=!1,this},this.HandleException=function(t){var e=null,n=null,n=null;null===(e=this.FExceptObject)&&pas.System.Assigned(this.FExceptObjectJS)&&(e=n=rtl.isExt(this.FExceptObjectJS,Error,1)?pas.SysUtils.EExternalException.$create("Create$1",[this.FExceptObjectJS.message]):rtl.isExt(this.FExceptObjectJS,Object,1)&&this.FExceptObjectJS.hasOwnProperty("message")?pas.SysUtils.EExternalException.$create("Create$1",[""+this.FExceptObjectJS.message]):pas.SysUtils.EExternalException.$create("Create$1",[JSON.stringify(this.FExceptObjectJS)]));try{this.ShowException(e),this.FStopOnException&&this.Terminate$1(this.FExceptionExitCode)}finally{n=rtl.freeLoc(n)}},this.Initialize=function(){this.FTerminated=!1},this.Run=function(){do{this.FExceptObject=null,this.FExceptObjectJS=null;try{this.DoRun()}catch(t){var e;pas.SysUtils.Exception.isPrototypeOf(t)?(this.FExceptObject=e=t,this.FExceptObjectJS=e):(this.FExceptObject=null,this.FExceptObjectJS=t),this.HandleException(this)}break}while(!this.FTerminated)},this.Terminate$1=function(t){this.FTerminated=!0,rtl.exitcode=t},this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})}),rtl.module("BrowserApp",["System","Classes","SysUtils","Types","JS","Web","CustApp"],function(){var t=this,a=t.$impl;rtl.createClass(this,"TBrowserApplication",pas.CustApp.TCustomApplication,function(){this.$init=function(){pas.CustApp.TCustomApplication.$init.call(this),this.FShowExceptions=!1},this.DoRun=function(){},this.Create$1=function(t){return pas.CustApp.TCustomApplication.Create$1.call(this,t),this.FShowExceptions=!0,null===a.AppInstance&&(a.AppInstance=this,pas.Classes.RegisterFindGlobalComponentProc(a.DoFindGlobalComponent)),this},this.Destroy=function(){a.AppInstance===this&&(a.AppInstance=null),pas.Classes.TComponent.Destroy.call(this)},this.ShowException=function(t){var e="";null!==t?e=t.$classname+": "+t.fMessage:this.FExceptObjectJS&&(e=this.FExceptObjectJS.toString()),e="Unhandled exception caught: "+e,this.FShowExceptions&&window.alert(e),pas.System.Writeln(e)},this.HandleException=function(t){pas.SysUtils.Exception.isPrototypeOf(this.FExceptObject)&&this.ShowException(this.FExceptObject),pas.CustApp.TCustomApplication.HandleException.call(this,t)},this.$rtti.addMethod("Create$1",2,[["aOwner",pas.Classes.$rtti.TComponent]])}),this.ReloadEnvironmentStrings=function(){var t,e,n="",i=[];null!=a.EnvNames&&pas.SysUtils.FreeAndNil({p:a,get:function(){return this.p.EnvNames},set:function(t){this.p.EnvNames=t}}),a.EnvNames=new Object,n=window.location.search;for(var i=(n=pas.System.Copy(n,2,n.length-1)).split("&"),r=0,s=rtl.length(i)-1;r<=s;r++)e=i[r].split("="),t=pas.SysUtils.LowerCase(decodeURIComponent(e[0])),2===rtl.length(e)?a.EnvNames[t]=decodeURIComponent(e[1]):1===rtl.length(e)&&(a.EnvNames[t]="")},t.$implcode=function(){a.EnvNames=null,a.Params=[],a.AppInstance=null,a.ReloadParamStrings=function(){var t,e="",n=[],n=""!==(e=pas.System.Copy$1(window.location.hash,2))?pas.SysUtils.TStringHelper.Split$1.call({get:function(){return e},set:function(t){e=t}},["/"]):rtl.arraySetLength(n,"",0);a.Params=rtl.arraySetLength(a.Params,"",1+rtl.length(n)),a.Params[0]=window.location.pathname;for(var i=0,r=rtl.length(n)-1;i<=r;i++)t=i,a.Params[1+t]=n[t]},a.GetParamCount=function(){return rtl.length(a.Params)-1},a.GetParamStr=function(t){var e="";return e=0<=t&&t<rtl.length(a.Params)?a.Params[t]:e},a.MyGetEnvironmentVariable=function(t){t=pas.SysUtils.LowerCase(t);return a.EnvNames.hasOwnProperty(t)?""+a.EnvNames[t]:""},a.MyGetEnvironmentVariableCount=function(){return rtl.length(Object.getOwnPropertyNames(a.EnvNames))},a.MyGetEnvironmentString=function(t){return""+a.EnvNames[Object.getOwnPropertyNames(a.EnvNames)[t]]},a.DoFindGlobalComponent=function(t){return null!=a.AppInstance?a.AppInstance.FindComponent(t):null}},t.$init=function(){pas.System.IsConsole=!0,pas.System.OnParamCount=a.GetParamCount,pas.System.OnParamStr=a.GetParamStr,t.ReloadEnvironmentStrings(),a.ReloadParamStrings(),pas.SysUtils.OnGetEnvironmentVariable=a.MyGetEnvironmentVariable,pas.SysUtils.OnGetEnvironmentVariableCount=a.MyGetEnvironmentVariableCount,pas.SysUtils.OnGetEnvironmentString=a.MyGetEnvironmentString}},[]),rtl.module("webassembly",["System","JS"],function(){rtl.recNewT(this,"TJSWebAssemblyMemoryDescriptor",function(){this.initial=0,this.maximum=0,this.shared=!1,this.$eq=function(t){return this.initial===t.initial&&this.maximum===t.maximum&&this.shared===t.shared},this.$assign=function(t){return this.initial=t.initial,this.maximum=t.maximum,this.shared=t.shared,this}}),rtl.recNewT(this,"TJSWebAssemblyTableDescriptor",function(){this.element="",this.initial=0,this.maximum=0,this.$eq=function(t){return this.element===t.element&&this.initial===t.initial&&this.maximum===t.maximum},this.$assign=function(t){return this.element=t.element,this.initial=t.initial,this.maximum=t.maximum,this}})}),rtl.module("wasienv",["System","SysUtils","Classes","JS","webassembly","Types"],function(){var o=this,l=o.$impl;this.WASI_ESUCCESS=0,this.WASI_EBADF=8,this.WASI_EINVAL=28,this.WASI_ENOSYS=52,this.WASI_CLOCK_MONOTONIC=0,this.WASI_CLOCK_PROCESS_CPUTIME_ID=1,this.WASI_CLOCK_REALTIME=2,this.WASI_CLOCK_THREAD_CPUTIME_ID=3,this.WASI_STDIN_FILENO=0,this.WASI_STDOUT_FILENO=1,this.WASI_STDERR_FILENO=2,rtl.createClass(this,"EWasiError",pas.SysUtils.Exception,function(){}),rtl.createClass(this,"TPas2JSWASIEnvironment",pas.System.TObject,function(){this.UTF8TextDecoder=null,this.$init=function(){pas.System.TObject.$init.call(this),this.FExitCode=0,this.FImportObject=null,this.Finstance=null,this.FIsLittleEndian=!1,this.FModuleInstanceExports=null,this.FOnGetConsoleInputBuffer=null,this.FOnGetConsoleInputString=null,this.FOnStdErrorWrite=null,this.FOnStdOutputWrite=null,this.FImportExtensions=null,this.FWASIImportName="",this.FMemory=null},this.$final=function(){this.FImportObject=void 0,this.Finstance=void 0,this.FModuleInstanceExports=void 0,this.FOnGetConsoleInputBuffer=void 0,this.FOnGetConsoleInputString=void 0,this.FOnStdErrorWrite=void 0,this.FOnStdOutputWrite=void 0,this.FImportExtensions=void 0,this.FMemory=void 0,pas.System.TObject.$final.call(this)},this.GetConsoleInputBuffer=function(){var e=null,n="",e=null;return null!=this.FOnGetConsoleInputBuffer?this.FOnGetConsoleInputBuffer(this,{get:function(){return e},set:function(t){e=t}}):e=null!=this.FOnGetConsoleInputString?(n="",this.FOnGetConsoleInputString(this,{get:function(){return n},set:function(t){n=t}}),l.toUTF8Array(n)):new Uint8Array(0),e},this.GetFileBuffer=function(t){return new Uint8Array(0)},this.GetImportObject=function(){return null==this.FImportObject&&(this.FImportObject=new Object,this.GetImports(this.FImportObject)),this.FImportObject},this.getiovs=function(t,e,n){for(var i,r,s=null,s=new Array,a=0,o=n-1;a<=o;a++)r=a,i=t.getUint32(r=e+8*r,this.FIsLittleEndian),r=t.getUint32(r+4,this.FIsLittleEndian),i=new Uint8Array(this.GetMemory().buffer,i,r),s.push(i);return s},this.GetMemory=function(){return this.FModuleInstanceExports.memory},this.SetInstance=function(t){this.Finstance!==t&&(this.Finstance=t,this.FModuleInstanceExports=this.Finstance.exports,null==this.FMemory)&&null!=this.FModuleInstanceExports.memory&&(this.FMemory=this.FModuleInstanceExports.memory)},this.setBigUint64=function(t,e,n,i){var r=n,n=Math.floor(n/4294967296);i?(t.setUint32(e+0,r,i),t.setUint32(e+4,n,i)):(t.setUint32(e+4,r,i),t.setUint32(e+0,n,i))},this.DoConsoleWrite=function(t,e){e=String.fromCharCode.apply(null,e);t?null!=this.FOnStdErrorWrite&&this.FOnStdErrorWrite(this,e):null!=this.FOnStdOutputWrite&&this.FOnStdOutputWrite(this,e)},this.GetImports=function(t){t.args_get=rtl.createCallback(this,"args_get"),t.args_sizes_get=rtl.createCallback(this,"args_sizes_get"),t.clock_res_get=rtl.createCallback(this,"clock_res_get"),t.clock_time_get=rtl.createCallback(this,"clock_time_get"),t.environ_get=rtl.createCallback(this,"environ_get"),t.environ_sizes_get=rtl.createCallback(this,"environ_sizes_get"),t.fd_advise=rtl.createCallback(this,"fd_advise"),t.fd_allocate=rtl.createCallback(this,"fd_allocate"),t.fd_close=rtl.createCallback(this,"fd_close"),t.fd_datasync=rtl.createCallback(this,"fd_datasync"),t.fd_fdstat_get=rtl.createCallback(this,"fd_fdstat_get"),t.fd_fdstat_set_flags=rtl.createCallback(this,"fd_fdstat_set_flags"),t.fd_fdstat_set_rights=rtl.createCallback(this,"fd_fdstat_set_rights"),t.fd_filestat_get=rtl.createCallback(this,"fd_filestat_get"),t.fd_filestat_set_size=rtl.createCallback(this,"fd_filestat_set_size"),t.fd_filestat_set_times=rtl.createCallback(this,"fd_filestat_set_times"),t.fd_pread=rtl.createCallback(this,"fd_pread"),t.fd_prestat_dir_name=rtl.createCallback(this,"fd_prestat_dir_name"),t.fd_prestat_get=rtl.createCallback(this,"fd_prestat_get"),t.fd_pwrite=rtl.createCallback(this,"fd_pwrite"),t.fd_read=rtl.createCallback(this,"fd_read"),t.fd_readdir=rtl.createCallback(this,"fd_readdir"),t.fd_renumber=rtl.createCallback(this,"fd_renumber"),t.fd_seek=rtl.createCallback(this,"fd_seek"),t.fd_sync=rtl.createCallback(this,"fd_sync"),t.fd_tell=rtl.createCallback(this,"fd_tell"),t.fd_write=rtl.createCallback(this,"fd_write"),t.path_create_directory=rtl.createCallback(this,"path_create_directory"),t.path_filestat_get=rtl.createCallback(this,"path_filestat_get"),t.path_filestat_set_times=rtl.createCallback(this,"path_filestat_set_times"),t.path_link=rtl.createCallback(this,"path_link"),t.path_open=rtl.createCallback(this,"path_open"),t.path_readlink=rtl.createCallback(this,"path_readlink"),t.path_remove_directory=rtl.createCallback(this,"path_remove_directory"),t.path_rename=rtl.createCallback(this,"path_rename"),t.path_symlink=rtl.createCallback(this,"path_symlink"),t.path_unlink_file=rtl.createCallback(this,"path_unlink_file"),t.poll_oneoff=rtl.createCallback(this,"poll_oneoff"),t.proc_exit=rtl.createCallback(this,"proc_exit"),t.proc_raise=rtl.createCallback(this,"proc_raise"),t.random_get=rtl.createCallback(this,"random_get"),t.sched_yield=rtl.createCallback(this,"sched_yield"),t.sock_recv=rtl.createCallback(this,"sock_recv"),t.sock_send=rtl.createCallback(this,"sock_send"),t.sock_shutdown=rtl.createCallback(this,"sock_shutdown")},this.GetTime=function(t){var e=0,e=-1;return 0!==t&&2!==t&&1!==t&&3!==t||(e=Date.now()),e*=1e6},this.getModuleMemoryDataView=function(){return new DataView(this.GetMemory().buffer)},this.AddExtension=function(t){null==this.FImportExtensions&&(this.FImportExtensions=pas.Classes.TFPList.$create("Create")),this.FImportExtensions.Add(t)},this.RemoveExtension=function(t){null!=this.FImportExtensions&&this.FImportExtensions.Remove(t)},this.args_get=function(t,e){return 0},this.args_sizes_get=function(t,e){var n=null;return(n=this.getModuleMemoryDataView()).setUint32(t,0,this.FIsLittleEndian),n.setUint32(e,0,this.FIsLittleEndian),0},this.clock_res_get=function(t,e){var n=this.getModuleMemoryDataView();return this.$class.setBigUint64(n,e,0,this.FIsLittleEndian),0},this.clock_time_get=function(t,e,n){var i=this.getModuleMemoryDataView();return-1===(t=this.GetTime(t))?28:(this.$class.setBigUint64(i,n,t,this.FIsLittleEndian),0)},this.environ_get=function(t,e){return 0},this.environ_sizes_get=function(t,e){var n=null;return(n=this.getModuleMemoryDataView()).setUint32(t,0,this.FIsLittleEndian),n.setUint32(e,0,this.FIsLittleEndian),0},this.fd_advise=function(t,e,n,i){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_advise"),52},this.fd_allocate=function(t,e,n){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_allocate"),52},this.fd_close=function(t){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_close"),52},this.fd_datasync=function(t){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_datasync"),52},this.fd_fdstat_get=function(t,e){var n=null;return(n=this.getModuleMemoryDataView()).setUint8(e,t),n.setUint16(e+2,0,this.FIsLittleEndian),n.setUint16(e+4,0,this.FIsLittleEndian),this.$class.setBigUint64(n,e+8,0,this.FIsLittleEndian),this.$class.setBigUint64(n,e+8+8,0,this.FIsLittleEndian),0},this.fd_fdstat_set_flags=function(t,e){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_fdstat_set_flags"),52},this.fd_fdstat_set_rights=function(t,e,n){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_fdstat_set_rights"),52},this.fd_filestat_get=function(t,e){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_filestat_get"),52},this.fd_filestat_set_size=function(t,e){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_filestat_set_size"),52},this.fd_filestat_set_times=function(t,e,n,i){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_filestat_set_times"),52},this.fd_pread=function(t,e,n,i,r){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_pread"),52},this.fd_prestat_dir_name=function(t,e,n){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_prestat_dir_name"),52},this.fd_prestat_get=function(t,e){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_prestat_get"),8},this.fd_pwrite=function(t,e,n,i,r){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_pwrite"),52},this.fd_read=function(t,e,n,i){var r=null,s=0,a=null;return s=0,r=this.getModuleMemoryDataView(),0<(a=0===t?this.GetConsoleInputBuffer():this.GetFileBuffer(t)).length&&this.getiovs(r,e,n).forEach(function(t,e,n){for(var i=0,i=0;i<t.byteLength&&s<a.length;)t[i]=a[s],i+=1,s+=1;return!0}),r.setUint32(i,s,this.FIsLittleEndian),0},this.fd_readdir=function(t,e,n,i,r){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_readdir"),52},this.fd_renumber=function(t,e){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_renumber"),52},this.fd_seek=function(t,e,n,i){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_seek"),52},this.fd_sync=function(t){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_sync"),52},this.fd_tell=function(t,e){return console.log("Unimplemented: TPas2JSWASIEnvironment.fd_tell"),52},this.fd_write=function(t,e,n,i){var r=null,a=0,o=null;return o=new Array,r=this.getModuleMemoryDataView(),a=0,this.getiovs(r,e,n).forEach(function(t,e,n){for(var i,r=0,s=t.byteLength-1;r<=s;r++)i=r,o.push(t[i]);return a+=t.byteLength,!0}),1!==t&&2!==t||this.DoConsoleWrite(2===t,o),r.setUint32(i,a,this.FIsLittleEndian),0},this.path_create_directory=function(t,e,n){return console.log("Unimplemented: TPas2JSWASIEnvironment.path_create_directory"),52},this.path_filestat_get=function(t,e,n,i,r){return console.log("Unimplemented: TPas2JSWASIEnvironment.path_filestat_get"),52},this.path_filestat_set_times=function(t,e,n,i,r,s){return console.log("Unimplemented: TPas2JSWASIEnvironment.path_filestat_set_times"),52},this.path_link=function(t,e,n,i,r,s,a){return console.log("Unimplemented: TPas2JSWASIEnvironment.path_link"),52},this.path_open=function(t,e,n,i,r,s,a,o,l){return console.log("Unimplemented: TPas2JSWASIEnvironment.path_open"),52},this.path_readlink=function(t,e,n,i,r,s){return console.log("Unimplemented: TPas2JSWASIEnvironment.path_readlink"),52},this.path_remove_directory=function(t,e,n){return console.log("Unimplemented: TPas2JSWASIEnvironment.path_remove_directory"),52},this.path_rename=function(t,e,n,i,r,s){return console.log("Unimplemented: TPas2JSWASIEnvironment.path_rename"),52},this.path_symlink=function(t,e,n,i,r){return console.log("Unimplemented: TPas2JSWASIEnvironment.path_symlink"),52},this.path_unlink_file=function(t,e,n){return console.log("Unimplemented: TPas2JSWASIEnvironment.path_unlink_file"),52},this.poll_oneoff=function(t,e,n,i){return console.log("Unimplemented: TPas2JSWASIEnvironment.poll_oneoff"),52},this.proc_exit=function(t){return this.FExitCode=t,0},this.proc_raise=function(t){return console.log("Unimplemented: TPas2JSWASIEnvironment.proc_raise"),52},this.random_get=function(t,e){var n,i=null,r=new Uint8Array(e);crypto.getRandomValues(r);for(var i=this.getModuleMemoryDataView(),s=0,a=r.length-1;s<=a;s++)n=s,i.setInt8(t+n,r[n]);return 0},this.sched_yield=function(){return 0},this.sock_recv=function(){return console.log("Unimplemented: TPas2JSWASIEnvironment.sock_recv"),52},this.sock_send=function(){return console.log("Unimplemented: TPas2JSWASIEnvironment.sock_recv"),52},this.sock_shutdown=function(){return console.log("Unimplemented: TPas2JSWASIEnvironment.sock_shutdown"),52},this.SetMemory=function(t){this.FMemory=t},this.Create$1=function(){return this.FIsLittleEndian=!0,this.FWASIImportName="wasi_snapshot_preview1",this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FImportExtensions},set:function(t){this.p.FImportExtensions=t}}),pas.System.TObject.Destroy.call(this)},this.GetUTF8StringFromMem=function(t,e){return this.UTF8TextDecoder.decode(this.getModuleMemoryDataView().buffer.slice(t,t+e))},this.AddImports=function(t){var e,n=null;if(t[this.FWASIImportName]=this.GetImportObject(),null!=this.FImportExtensions)for(var i=0,r=this.FImportExtensions.FCount-1;i<=r;i++)e=i,n=rtl.getObject(this.FImportExtensions.Get(e)),e=new Object,n.FillImportObject(e),t[n.ImportName()]=e}}),rtl.createClass(this,"TImportExtension",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FEnv=null},this.$final=function(){this.FEnv=void 0,pas.System.TObject.$final.call(this)},this.getModuleMemoryDataView=function(){return this.FEnv.getModuleMemoryDataView()},this.Create$1=function(t){return this.FEnv=t,null!=this.FEnv&&this.FEnv.AddExtension(this),this},this.Destroy=function(){null!=this.FEnv&&this.FEnv.RemoveExtension(this),pas.System.TObject.Destroy.call(this)}}),rtl.recNewT(this,"TWebAssemblyStartDescriptor",function(){this.Module=null,this.Memory=null,this.Table=null,this.Exported=null,this.Imports=null,this.Instance=null,this.CallRun=null,this.RunExceptionClass="",this.RunExceptionMessage="",this.$eq=function(t){return this.Module===t.Module&&this.Memory===t.Memory&&this.Table===t.Table&&this.Exported===t.Exported&&this.Imports===t.Imports&&this.Instance===t.Instance&&rtl.eqCallback(this.CallRun,t.CallRun)&&this.RunExceptionClass===t.RunExceptionClass&&this.RunExceptionMessage===t.RunExceptionMessage},this.$assign=function(t){return this.Module=t.Module,this.Memory=t.Memory,this.Table=t.Table,this.Exported=t.Exported,this.Imports=t.Imports,this.Instance=t.Instance,this.CallRun=t.CallRun,this.RunExceptionClass=t.RunExceptionClass,this.RunExceptionMessage=t.RunExceptionMessage,this}}),rtl.createClass(this,"TWASIHost",pas.Classes.TComponent,function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FAfterInstantation=null,this.FAfterStart=null,this.FBeforeInstantation=null,this.FBeforeStart=null,this.FEnv=null,this.FExported=null,this.FOnInstantiateFail=null,this.FOnLoadFail=null,this.FPreparedStartDescriptor=o.TWebAssemblyStartDescriptor.$new(),this.FMemoryDescriptor=pas.webassembly.TJSWebAssemblyMemoryDescriptor.$new(),this.FOnConsoleRead=null,this.FOnConsoleWrite=null,this.FPredefinedConsoleInput=null,this.FReadLineCount=0,this.FRunEntryFunction="",this.FTableDescriptor=pas.webassembly.TJSWebAssemblyTableDescriptor.$new()},this.$final=function(){this.FAfterInstantation=void 0,this.FAfterStart=void 0,this.FBeforeInstantation=void 0,this.FBeforeStart=void 0,this.FEnv=void 0,this.FExported=void 0,this.FOnInstantiateFail=void 0,this.FOnLoadFail=void 0,this.FPreparedStartDescriptor=void 0,this.FMemoryDescriptor=void 0,this.FOnConsoleRead=void 0,this.FOnConsoleWrite=void 0,this.FPredefinedConsoleInput=void 0,this.FTableDescriptor=void 0,pas.Classes.TComponent.$final.call(this)},this.DoAfterInstantiate=function(){null!=this.FAfterInstantation&&this.FAfterInstantation(this)},this.DoBeforeInstantiate=function(){null!=this.FBeforeInstantation&&this.FBeforeInstantation(this)},this.DoLoadFail=function(t){null!=this.FOnLoadFail&&this.FOnLoadFail(this,t)},this.DoInstantiateFail=function(t){null!=this.FOnInstantiateFail&&this.FOnInstantiateFail(this,t)},this.PrepareWebAssemblyInstance=function(t){this.FPreparedStartDescriptor.$assign(t),this.FExported=t.Exported,this.FEnv.SetInstance(t.Instance),this.FEnv.SetMemory(t.Memory),this.DoAfterInstantiate()},this.RunWebAssemblyInstance=function(e,n,i){var r=!1,r=!0;if(null!=e&&(r=e(this,o.TWebAssemblyStartDescriptor.$clone(this.FPreparedStartDescriptor))),null!=this.FBeforeStart&&this.FBeforeStart(this,o.TWebAssemblyStartDescriptor.$clone(this.FPreparedStartDescriptor),{get:function(){return r},set:function(t){r=t}}),r){try{(i=null===i?this.FPreparedStartDescriptor.CallRun:i)(this.FPreparedStartDescriptor.Exported),null!=n&&n(this,o.TWebAssemblyStartDescriptor.$clone(this.FPreparedStartDescriptor)),null!=this.FAfterStart&&this.FAfterStart(this,o.TWebAssemblyStartDescriptor.$clone(this.FPreparedStartDescriptor))}catch(t){if(pas.SysUtils.Exception.isPrototypeOf(t)){e=t;this.FPreparedStartDescriptor.RunExceptionClass=e.$classname,this.FPreparedStartDescriptor.RunExceptionMessage=e.fMessage}else if(rtl.isExt(t,Error)){i=t;this.FPreparedStartDescriptor.RunExceptionClass=typeof i,this.FPreparedStartDescriptor.RunExceptionMessage=i.message}else{if(!rtl.isExt(t,Object))throw t;n=t;this.FPreparedStartDescriptor.RunExceptionClass=typeof n,this.FPreparedStartDescriptor.RunExceptionMessage=JSON.stringify(n)}}""!==this.FPreparedStartDescriptor.RunExceptionClass&&console.log("Running Webassembly resulted in exception. Exception class: ",this.FPreparedStartDescriptor.RunExceptionClass,", message:",this.FPreparedStartDescriptor.RunExceptionMessage)}return r},this.DoStdRead=function(t,e){var n="",n="";null!=this.FOnConsoleRead?this.FOnConsoleRead(this,{get:function(){return n},set:function(t){n=t}}):this.FReadLineCount<this.FPredefinedConsoleInput.GetCount()&&(n=this.FPredefinedConsoleInput.Get(this.FReadLineCount),this.FReadLineCount+=1),e.set(n)},this.DoStdWrite=function(t,e){this.WriteOutput(e)},this.CreateWebAssembly=function(e,n){var i=this;function r(t){return t}function s(t){return console.log("Instantiating of WebAssembly from "+e+" failed "+l.ValueToMessage(t)),i.DoInstantiateFail(t),!1}function a(t){return i.DoBeforeInstantiate(),WebAssembly.instantiate(t,n).then(r,s)}function t(t){return console.log("Loading of WebAssembly from "+e+" failed "+l.ValueToMessage(t)),i.DoLoadFail(t),!1}return fetch(e).then(function(t){return t.arrayBuffer().then(a,null)},t).catch(t)},this.CreateWasiEnvironment=function(){return o.TPas2JSWASIEnvironment.$create("Create$1")},this.GetTable=function(){return new WebAssembly.Table(pas.webassembly.TJSWebAssemblyTableDescriptor.$clone(this.FTableDescriptor))},this.GetMemory=function(){return new WebAssembly.Memory(pas.webassembly.TJSWebAssemblyMemoryDescriptor.$clone(this.FMemoryDescriptor))},this.Create$1=function(t){return pas.Classes.TComponent.Create$1.call(this,t),this.FEnv=this.CreateWasiEnvironment(),this.FEnv.FOnStdErrorWrite=rtl.createCallback(this,"DoStdWrite"),this.FEnv.FOnStdOutputWrite=rtl.createCallback(this,"DoStdWrite"),this.FEnv.FOnGetConsoleInputString=rtl.createCallback(this,"DoStdRead"),this.FMemoryDescriptor.initial=256,this.FMemoryDescriptor.maximum=256,this.FMemoryDescriptor.shared=!1,this.FTableDescriptor.initial=0,this.FTableDescriptor.maximum=0,this.FTableDescriptor.element="anyfunc",this.FPredefinedConsoleInput=pas.Classes.TStringList.$create("Create$1"),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FPredefinedConsoleInput},set:function(t){this.p.FPredefinedConsoleInput=t}}),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FEnv},set:function(t){this.p.FEnv=t}}),pas.Classes.TComponent.Destroy.call(this)},this.WriteOutput=function(t){null!=this.FOnConsoleWrite?this.FOnConsoleWrite(this,t):pas.System.Writeln(t)},this.InitStartDescriptor=function(t,e,n){var i=o.TWebAssemblyStartDescriptor.$new();return i.Memory=t,i.Table=e,(n=null==n?new Object:n).env=pas.JS.New(["memory",i.Memory,"tbl",i.Table]),this.FEnv.AddImports(n),i.Imports=n,i},this.StartWebAssembly=function(t,e,n,i){var r=this,s=o.TWebAssemblyStartDescriptor.$new();function a(t){return console.log("Failed to create webassembly. Reason:"),console.debug(t),!0}return this.FReadLineCount=0,this.FPreparedStartDescriptor.$assign(o.TWebAssemblyStartDescriptor.$new()),s.$assign(this.InitStartDescriptor(this.GetMemory(),this.GetTable(),null)),this.CreateWebAssembly(t,s.Imports).then(function(t){if("object"!=typeof t)throw o.EWasiError.$create("Create$1",["Did not get a instantiated webassembly"]);return s.Instance=t.instance,s.Module=t.module,s.Exported=s.Instance.exports,s.CallRun=function(t){""===r.FRunEntryFunction?null!=t._initialize?t._initialize():t._start():t[r.FRunEntryFunction]()},r.PrepareWebAssemblyInstance(o.TWebAssemblyStartDescriptor.$clone(s)),e&&r.RunWebAssemblyInstance(n,i,null),Promise.resolve(o.TWebAssemblyStartDescriptor.$clone(s))},a).catch(a)},this.$rtti.addMethod("Create$1",2,[["aOwner",pas.Classes.$rtti.TComponent]])}),o.$implcode=function(){l.ValueToMessage=function(t){var e="";return rtl.isObject(t)&&(e=rtl.getObject(t).$classname,pas.SysUtils.Exception.isPrototypeOf(rtl.getObject(t)))&&(e=e+": "+rtl.getObject(t).fMessage),e="object"==typeof t&&t.hasOwnProperty("message")?""+t.message:JSON.stringify(t)},l.toUTF8Array=function(t){var e,n,i=null,r=0,s=0;function a(t){i[s]=t,s+=1}for(i=new Uint8Array(4*t.length),s=0,e=t.length,r=1;r<=e;)(n=t.charCodeAt(r-1))<128?a(n):(n<2048?a(rtl.or(192,Math.floor(n/64))):(n<55296||57344<=n?a(rtl.or(224,Math.floor(n/4096))):(r+=1,n=65536+rtl.or(rtl.shl(1023&n,10),1023&t.charCodeAt(r-1)),a(rtl.or(240,Math.floor(n/262144))),a(rtl.or(128,63&Math.floor(n/4096)))),a(rtl.or(128,63&Math.floor(n/64)))),a(rtl.or(128,63&n))),r+=1;return i=i.slice(0,s)}},o.$init=function(){var t;t=null,(t=new Object).ignoreBOM=!0,t.fatal=!0,o.TPas2JSWASIEnvironment.UTF8TextDecoder=new TextDecoder("utf-8",t)}},["weborworker"]),rtl.module("wasihostapp",["System","Classes","SysUtils","BrowserApp","JS","webassembly","wasienv"],function(){rtl.createClass(this,"TBrowserWASIHostApplication",pas.BrowserApp.TBrowserApplication,function(){this.$init=function(){pas.BrowserApp.TBrowserApplication.$init.call(this),this.FHost=null},this.$final=function(){this.FHost=void 0,pas.BrowserApp.TBrowserApplication.$final.call(this)},this.GetEnv=function(){return this.FHost.FEnv},this.SetRunEntryFunction=function(t){this.FHost.FRunEntryFunction=t},this.CreateHost=function(){return pas.wasienv.TWASIHost.$create("Create$1",[this])},this.Create$1=function(t){return pas.BrowserApp.TBrowserApplication.Create$1.call(this,t),this.FHost=this.CreateHost(),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FHost},set:function(t){this.p.FHost=t}}),pas.BrowserApp.TBrowserApplication.Destroy.call(this)},this.StartWebAssembly=function(t,e,n,i){return this.FHost.StartWebAssembly(t,e,n,i)},this.$rtti.addMethod("Create$1",2,[["aOwner",pas.Classes.$rtti.TComponent]])})}),rtl.module("jsGraphics",["System","Classes","SysUtils","JS","Web","Types"],function(){var e=this;this.$rtti.$Int("TFontCharSet",{minvalue:0,maxvalue:255,ordtype:3}),this.TFontStyle={0:"fsBold",fsBold:0,1:"fsItalic",fsItalic:1,2:"fsUnderline",fsUnderline:2,3:"fsStrikeOut",fsStrikeOut:3},this.$rtti.$Enum("TFontStyle",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TFontStyle}),this.$rtti.$Set("TFontStyles",{comptype:this.$rtti.TFontStyle}),this.TPenStyle={0:"psSolid",psSolid:0,1:"psDash",psDash:1,2:"psDot",psDot:2,3:"psDashDot",psDashDot:3,4:"psDashDotDot",psDashDotDot:4,5:"psInsideFrame",psInsideFrame:5,6:"psPattern",psPattern:6,7:"psClear",psClear:7},this.$rtti.$Enum("TPenStyle",{minvalue:0,maxvalue:7,ordtype:1,enumtype:this.TPenStyle}),this.TBrushStyle={0:"bsSolid",bsSolid:0,1:"bsClear",bsClear:1,2:"bsHorizontal",bsHorizontal:2,3:"bsVertical",bsVertical:3,4:"bsFDiagonal",bsFDiagonal:4,5:"bsBDiagonal",bsBDiagonal:5,6:"bsCross",bsCross:6,7:"bsDiagCross",bsDiagCross:7,8:"bsImage",bsImage:8,9:"bsPattern",bsPattern:9},this.$rtti.$Enum("TBrushStyle",{minvalue:0,maxvalue:9,ordtype:1,enumtype:this.TBrushStyle}),rtl.createClass(this,"TFont",pas.Classes.TPersistent,function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FCharSet=0,this.FColor=0,this.FName="",this.FSize=0,this.FStyle={},this.FUpdateCount=0,this.FOnChange=null},this.$final=function(){this.FStyle=void 0,this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.GetHeight=function(){return Math.round(96*this.FSize/72)},this.SetCharSet=function(t){this.FCharSet!==t&&(this.FCharSet=t,this.Changed())},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.Changed())},this.SetHeight=function(t){this.SetSize(Math.round(72*t/96))},this.SetName=function(t){this.FName!==t&&(this.FName=t,this.Changed())},this.SetSize=function(t){this.FSize!==t&&(this.FSize=t,this.Changed())},this.SetStyle=function(t){rtl.neSet(this.FStyle,t)&&(this.FStyle=rtl.refSet(t),this.Changed())},this.Changed=function(){0===this.FUpdateCount&&null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FColor=0,this.FName=e.ffMonospace,this.FSize=16,this.FStyle={},this.FUpdateCount=0,this};var t=this.$rtti;t.addMethod("Create$1",2,[]),t.addProperty("CharSet",2,e.$rtti.TFontCharSet,"FCharSet","SetCharSet"),t.addProperty("Color",2,rtl.nativeuint,"FColor","SetColor"),t.addProperty("Height",3,rtl.nativeint,"GetHeight","SetHeight"),t.addProperty("Name",2,rtl.string,"FName","SetName"),t.addProperty("Size",2,rtl.nativeint,"FSize","SetSize"),t.addProperty("Style",2,e.$rtti.TFontStyles,"FStyle","SetStyle"),t.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange")}),rtl.createClass(this,"TPen",pas.Classes.TPersistent,function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FColor=0,this.FStyle=0,this.FWidth=0,this.FUpdateCount=0,this.FOnChange=null},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.Changed())},this.SetStyle=function(t){this.FStyle!==t&&(this.FStyle=t,this.Changed())},this.SetWidth=function(t){this.FWidth!==t&&(this.FWidth=t,this.Changed())},this.Changed=function(){0===this.FUpdateCount&&null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FColor=0,this.FStyle=0,this.FWidth=1,this.FUpdateCount=0,this};var t=this.$rtti;t.addMethod("Create$1",2,[]),t.addProperty("Color",2,rtl.nativeuint,"FColor","SetColor"),t.addProperty("Style",2,e.$rtti.TPenStyle,"FStyle","SetStyle"),t.addProperty("Width",2,rtl.nativeint,"FWidth","SetWidth"),t.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange")}),rtl.createClass(this,"TBrush",pas.Classes.TPersistent,function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FColor=0,this.FStyle=0,this.FUpdateCount=0,this.FOnChange=null},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.Changed())},this.SetStyle=function(t){this.FStyle===t&&(this.FStyle=t,this.Changed())},this.Changed=function(){0===this.FUpdateCount&&null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FColor=16777215,this.FStyle=0,this.FUpdateCount=0,this};var t=this.$rtti;t.addMethod("Create$1",2,[]),t.addProperty("Color",2,rtl.nativeuint,"FColor","SetColor"),t.addProperty("Style",2,e.$rtti.TBrushStyle,"FStyle","SetStyle"),t.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange")}),rtl.createClass(this,"TCanvas",pas.Classes.TPersistent,function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FBrush=null,this.FFont=null,this.FPen=null,this.FUpdateCount=0,this.FOnChange=null,this.isWebGL=!1,this.ctx=null,this.FCanvasElement=null},this.$final=function(){this.FBrush=void 0,this.FFont=void 0,this.FPen=void 0,this.FOnChange=void 0,this.ctx=void 0,this.FCanvasElement=void 0,pas.Classes.TPersistent.$final.call(this)},this.PrepareStyle=function(){var t;this.ctx.fillStyle=e.JSColor(this.FBrush.FColor),this.ctx.lineWidth=1,this.ctx.strokeStyle=e.JSColor(this.FPen.FColor),this.isWebGL||(1===(t=this.FPen.FStyle)?this.ctx.setLineDash([8,2]):2===t?this.ctx.setLineDash([1,2]):this.ctx.setLineDash([]))},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FBrush=e.TBrush.$create("Create$1"),this.FFont=e.TFont.$create("Create$1"),this.FPen=e.TPen.$create("Create$1"),this.FUpdateCount=0,this},this.Destroy=function(){this.FBrush.$destroy("Destroy"),this.FFont.$destroy("Destroy"),this.FPen.$destroy("Destroy"),this.FBrush=null,this.FFont=null,this.FPen=null,pas.System.TObject.Destroy.call(this)},this.Clear=function(){this.ClearRect(0,0,this.FCanvasElement.width,this.FCanvasElement.height)},this.ClearRect=function(t,e,n,i){this.ctx.clearRect(t,e,n,i)},this.LineTo=function(t,e){this.PrepareStyle(),this.ctx.lineTo(t,e),this.FPen.FStyle},this.MoveTo=function(t,e){this.ctx.moveTo(t,e)},this.Stroke=function(){this.ctx.stroke()},this.BeginPath=function(){this.ctx.beginPath()};var t=this.$rtti;t.addMethod("Create$1",2,[]),t.addProperty("Canvas",0,pas.Web.$rtti.TJSHTMLCanvasElement,"FCanvasElement","FCanvasElement"),t.addProperty("Element",0,pas.Web.$rtti.TJSHTMLCanvasElement,"FCanvasElement",""),t.addProperty("Brush",0,e.$rtti.TBrush,"FBrush","FBrush"),t.addProperty("Font",0,e.$rtti.TFont,"FFont","FFont"),t.addProperty("Pen",0,e.$rtti.TPen,"FPen","FPen"),t.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange")}),this.clBlack=0,this.clYellow=65535,this.clWhite=16777215,this.ffMonospace="Arial",this.JSColor=function(t){var e=255&t,n=255&Math.floor(t/256),t=255&Math.floor(t/65536);return"#"+pas.SysUtils.IntToHex(e,2)+pas.SysUtils.IntToHex(n,2)+pas.SysUtils.IntToHex(t,2)}}),rtl.module("fjsform",["System","JS","Web","jsGraphics","wacanvas","SysUtils"],function(){var o=this;rtl.createClass(this,"TJSForm",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.canvas1=null,this.canvas2=null,this.Panel=null,this.XHR=null,this.sInput="",this.DataText="",this.Fcode="",this.nz=0,this.CtlCanvas=null},this.$final=function(){this.canvas1=void 0,this.canvas2=void 0,this.Panel=void 0,this.XHR=void 0,this.CtlCanvas=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(){var t=this,e="";return this.nz=2,window.onkeydown=rtl.createSafeCallback(t,"keydown"),window.onresize=rtl.createSafeCallback(t,"resize"),window.addEventListener("resize",rtl.createCallback(t,"resize")),this.Panel=document.getElementById("mchart"),null===this.Panel&&(this.Panel=document.createElement("div"),this.Panel.setAttribute("id","mchart"),this.Panel.setAttribute("style","width:100%;height:100%;position: absolute;top:5px;bottom:5px;"),document.body.appendChild(this.Panel)),this.canvas1=document.createElement("canvas"),this.canvas1.setAttribute("id","canvas1"),this.canvas1.style.setProperty("background-color","#000"),this.canvas1.style.setProperty("position","absolute"),this.canvas1.style.setProperty("width","100%"),this.canvas1.style.setProperty("height","100%"),this.canvas1.setAttribute("top","0"),this.canvas1.setAttribute("left","0"),this.canvas1.setAttribute("width",pas.SysUtils.IntToStr(this.Panel.clientWidth)),this.canvas1.setAttribute("height",pas.SysUtils.IntToStr(this.Panel.clientHeight)),this.canvas2=document.createElement("canvas"),this.canvas2.setAttribute("id","canvas2"),this.canvas2.setAttribute("top","0"),this.canvas2.setAttribute("left","0"),this.canvas2.setAttribute("width",pas.SysUtils.IntToStr(this.Panel.clientWidth)),this.canvas2.setAttribute("height",pas.SysUtils.IntToStr(this.Panel.clientHeight)),this.canvas2.setAttribute("hoverCursor","pointer"),this.canvas2.style.setProperty("background-color","transparent"),this.canvas2.style.setProperty("position","absolute"),this.canvas2.style.setProperty("width","100%"),this.canvas2.style.setProperty("height","100%"),this.canvas2.onmousemove=rtl.createSafeCallback(t,"MOUSEMOVE"),this.canvas2.ontouchmove=rtl.createSafeCallback(t,"touchmove"),this.Panel.appendChild(this.canvas1),this.Panel.appendChild(this.canvas2),e=window.location.pathname,"html"===pas.SysUtils.RightStr(e,4)?e=pas.SysUtils.RightStr(window.location.search,6):6<=e.length&&(e=pas.SysUtils.RightStr(e,6)),this.CtlCanvas=pas.jsGraphics.TCanvas.$create("Create$1"),this.CtlCanvas.isWebGL=!1,this.CtlCanvas.FCanvasElement=this.canvas2,this.CtlCanvas.ctx=this.canvas2.getContext("2d"),this.CtlCanvas.FPen.SetStyle(0),this.CtlCanvas.FFont.SetHeight(30*this.nz),this.DataText=e,this.canvas1.width=this.Panel.clientWidth*this.nz,this.canvas1.height=this.Panel.clientHeight*this.nz,this.canvas2.width=this.Panel.clientWidth*this.nz,this.canvas2.height=this.Panel.clientHeight*this.nz,this},this.InitChart=function(){o.Fadd(-2,0,this.Panel.clientWidth*this.nz,this.Panel.clientHeight*this.nz,0,0,0,0),this.Update()},this.Update=function(){o.Fadd(-99,0,this.Panel.clientWidth*this.nz,this.Panel.clientHeight*this.nz,0,0,0,0)},this.keydown=function(t){return this.keypress(t.key),!0},this.resize=function(t){return this.canvas1.width=this.Panel.clientWidth*this.nz,this.canvas1.height=this.Panel.clientHeight*this.nz,this.canvas2.width=this.Panel.clientWidth*this.nz,this.canvas2.height=this.Panel.clientHeight*this.nz,this.Update(),!0},this.MOUSEMOVE=function(t){return this.onmousemove(t.offsetX*this.nz,t.offsetY*this.nz),!0},this.touchmove=function(t){return this.onmousemove(t.targetTouches.item(0).pageX*this.nz,t.targetTouches.item(0).pageY*this.nz),!0},this.keypress=function(t){"Escape"!==t&&("Enter"===t?(this.Data(this.sInput),this.sInput=""):this.sInput=this.sInput+t)},this.Data=function(t){t!==this.Fcode&&(this.Fcode=t,this.XHR=new XMLHttpRequest,this.XHR.addEventListener("load",rtl.createSafeCallback(this,"load")),this.XHR.open("GET",t,!0),this.XHR.send())},this.load=function(t){var e,n,i,r;if(200===this.XHR.status){n=JSON.parse(this.XHR.responseText),this.resize(null),this.DataText=this.XHR.responseText,i=n.data,o.Fadd(-1,i.length,0,0,0,0,0,0);for(var s=0,a=i.length-1;s<=a;s++)r=i[e=s],o.Fadd(e,Math.round(pas.JS.toNumber(r[0])),pas.JS.toNumber(r[1]),pas.JS.toNumber(r[4]),pas.JS.toNumber(r[3]),pas.JS.toNumber(r[2]),pas.JS.toNumber(r[5]),0);this.Update()}return!0},this.onmousemove=function(t,e){this.CtlCanvas.Clear(),this.CtlCanvas.BeginPath(),this.CtlCanvas.FPen.SetColor(65535),this.CtlCanvas.FBrush.SetColor(65535),this.CtlCanvas.MoveTo(0,Math.round(e)),this.CtlCanvas.LineTo(this.CtlCanvas.FCanvasElement.width,Math.round(e)),this.CtlCanvas.MoveTo(Math.round(t),0),this.CtlCanvas.LineTo(Math.round(t),this.CtlCanvas.FCanvasElement.height),this.CtlCanvas.Stroke(),null!=o.Fgetcx&&o.Fgetcx(t,e)}}),this.JSForm=null,this.Fadd=null,this.Fgetcx=null}),rtl.module("wacanvas",["System","SysUtils","JS","Web","wasienv"],function(){var s=this,r=s.$impl;this.ECANVAS_SUCCESS=0,this.ECANVAS_NOCANVAS=1,rtl.createClass(this,"TWACanvas",pas.wasienv.TImportExtension,function(){this.$init=function(){pas.wasienv.TImportExtension.$init.call(this),this.FCanvases=null,this.FCurrentID=0,this.FCanvasParent=null},this.$final=function(){this.FCanvases=void 0,this.FCanvasParent=void 0,pas.wasienv.TImportExtension.$final.call(this)},this.GetCanvas=function(t){var e=null,t=this.FCanvases[pas.SysUtils.IntToStr(t)];return rtl.isObject(t)?(e=t,s.isWebGL):e=null,e},this.allocate=function(t,e,n){var i,r=null;return pas.System.Writeln(this.FCurrentID),0===this.FCurrentID?(r=pas.fjsform.JSForm.canvas1,this.FCurrentID=1,s.isWebGL?(WebGL2D.enable(r),i=r.getContext("webgl-2d"),this.FCanvases[pas.SysUtils.IntToStr(this.FCurrentID)]=i):this.FCanvases[pas.SysUtils.IntToStr(this.FCurrentID)]=r.getContext("2d")):(r=pas.fjsform.JSForm.canvas2,this.FCurrentID=2,this.FCanvases[pas.SysUtils.IntToStr(this.FCurrentID)]=r.getContext("2d")),this.getModuleMemoryDataView().setUint32(n,this.FCurrentID,this.FEnv.FIsLittleEndian),0},this.moveto=function(t,e,n){var i=0,r=null,i=1;return null!=(r=this.GetCanvas(t))&&(r.moveTo(e,n),i=0),i},this.lineto=function(t,e,n){var i=0,r=null,i=1;return null!=(r=this.GetCanvas(t))&&(r.lineTo(e,n),i=0),i},this.stroke=function(t){var e=0,n=null,e=1;return null!=(n=this.GetCanvas(t))&&(n.stroke(),e=0),e},this.beginpath=function(t){var e=0,n=null,e=1;return null!=(n=this.GetCanvas(t))&&(n.beginPath(),e=0),e},this.arc=function(t,e,n,i,r,s){var a=0,o=null,a=1;return null!=(o=this.GetCanvas(t))&&(o.arc(e,n,i,r,s),a=0),a},this.fillrect=function(t,e,n,i,r){var s=0,a=null,s=1;return null!=(a=this.GetCanvas(t))&&(a.fillRect(e,n,i,r),s=0),s},this.strokerect=function(t,e,n,i,r){var s=0,a=null,s=1;return null!=(a=this.GetCanvas(t))&&(a.strokeRect(e,n,i,r),s=0),s},this.clearrect=function(t,e,n,i,r){var s=0,a=null,s=1;return null!=(a=this.GetCanvas(t))&&(a.clearRect(e,n,i,r),s=0),s},this.StrokeText=function(t,e,n,i,r){var s=0,a=null,s=1;return null!=(a=this.GetCanvas(t))&&(t=this.FEnv.GetUTF8StringFromMem(i,r),a.strokeText(t,e,n),s=0),s},this.FillText=function(t,e,n,i,r){var s=0,a=null,s=1;return null!=(a=this.GetCanvas(t))&&(t=this.FEnv.GetUTF8StringFromMem(i,r),a.fillText(t,e,n),s=0),s},this.setStrokeStyle=function(t,e){var n=0,i=null,n=1;return null!=(i=this.GetCanvas(t))&&(i.strokeStyle=r.JSColor(e),n=0),n},this.setFillStyle=function(t,e){var n=0,i=null,n=1;return null!=(i=this.GetCanvas(t))&&(i.fillStyle=r.JSColor(e),n=0),n},this.setFont=function(t,e,n){var i=0,r=null,i=1;return null!=(r=this.GetCanvas(t))&&(t=this.FEnv.GetUTF8StringFromMem(e,n),r.font=t,r.textBaseline="bottom",i=0),i},this.setsize=function(t,e,n){var i=0,i=1;return i=null!=this.GetCanvas(t)?0:i},this.getdata=function(t,e,n){e=this.FEnv.GetUTF8StringFromMem(e,n);return pas.fjsform.JSForm.Data(e),0},this.DoGetInputString=function(t,e){e.set(pas.System.Copy(pas.fjsform.JSForm.DataText,1,200)+"\n")},this.beginupdate=function(t){var e=0,e=1;return e=null!=this.GetCanvas(t)?0:e},this.endupdate=function(t){var e=0,e=1;return e=null!=this.GetCanvas(t)?0:e},this.Create$1=function(t){return pas.wasienv.TImportExtension.Create$1.call(this,t),this.FCanvases=new Object,t.FOnGetConsoleInputString=rtl.createCallback(this,"DoGetInputString"),this},this.FillImportObject=function(t){t.allocate=rtl.createCallback(this,"allocate"),t.moveto=rtl.createCallback(this,"moveto"),t.lineto=rtl.createCallback(this,"lineto"),t.stroke=rtl.createCallback(this,"stroke"),t.fill=rtl.createCallback(this,"stroke"),t.beginpath=rtl.createCallback(this,"beginpath"),t.arc=rtl.createCallback(this,"arc"),t.fillrect=rtl.createCallback(this,"fillrect"),t.strokerect=rtl.createCallback(this,"strokerect"),t.clearrect=rtl.createCallback(this,"clearrect"),t.stroketext=rtl.createCallback(this,"StrokeText"),t.filltext=rtl.createCallback(this,"FillText"),t.setstrokestyle=rtl.createCallback(this,"setStrokeStyle"),t.setfillstyle=rtl.createCallback(this,"setFillStyle"),t.setfont=rtl.createCallback(this,"setFont"),t.setsize=rtl.createCallback(this,"setsize"),t.getdata=rtl.createCallback(this,"getdata"),t.beginupdate=rtl.createCallback(this,"beginupdate"),t.endupdate=rtl.createCallback(this,"endupdate")},this.ImportName=function(){return"web_canvas"}}),this.isWebGL=!1,s.$implcode=function(){r.JSColor=function(t){var e=t>>>8&255,n=t>>>16&255;return"#"+pas.SysUtils.IntToHex(255&t,2)+pas.SysUtils.IntToHex(e,2)+pas.SysUtils.IntToHex(n,2)}}},["fjsform"]),rtl.module("program",["System","wasihostapp","BrowserApp","JS","Classes","SysUtils","Web","webassembly","Types","wasienv","wacanvas","fjsform"],function(){var t=this;rtl.createClass(this,"TMyApplication",pas.wasihostapp.TBrowserWASIHostApplication,function(){this.$init=function(){pas.wasihostapp.TBrowserWASIHostApplication.$init.call(this),this.FWasiEnv=null,this.FWACanvas=null},this.$final=function(){this.FWasiEnv=void 0,this.FWACanvas=void 0,pas.wasihostapp.TBrowserWASIHostApplication.$final.call(this)},this.OnBeforeStart=function(t,e){return!0},this.OnAfterStart=function(t,e){var n=e.Exported;this.FWasiEnv.SetInstance(e.Instance),pas.fjsform.Fadd=n.add,pas.fjsform.Fgetcx=n.getcx,pas.fjsform.JSForm.InitChart()},this.DoWrite=function(t,e){pas.System.Writeln(e)},this.Create$1=function(t){return pas.wasihostapp.TBrowserWASIHostApplication.Create$1.call(this,t),this.FWasiEnv=pas.wasienv.TPas2JSWASIEnvironment.$create("Create$1"),this.FWasiEnv.FOnStdErrorWrite=rtl.createCallback(this,"DoWrite"),this.FWasiEnv.FOnStdOutputWrite=rtl.createCallback(this,"DoWrite"),pas.wacanvas.isWebGL=!1,pas.fjsform.JSForm=pas.fjsform.TJSForm.$create("Create$1"),this.FWACanvas=pas.wacanvas.TWACanvas.$create("Create$1",[this.GetEnv()]),this.FWACanvas.FCanvasParent=pas.fjsform.JSForm.Panel,this.SetRunEntryFunction("_initialize"),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FWasiEnv},set:function(t){this.p.FWasiEnv=t}}),pas.wasihostapp.TBrowserWASIHostApplication.Destroy.call(this)},this.DoRun=function(){this.SetRunEntryFunction("_initialize"),this.StartWebAssembly("chartdraw.wasm",!0,rtl.createCallback(this,"OnBeforeStart"),rtl.createCallback(this,"OnAfterStart"))},this.$rtti.addMethod("Create$1",2,[["aOwner",pas.Classes.$rtti.TComponent]])}),this.Application=null,t.$main=function(){t.Application=t.TMyApplication.$create("Create$1",[null]),t.Application.Initialize(),t.Application.Run()}});